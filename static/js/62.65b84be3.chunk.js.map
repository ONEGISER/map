{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/ogc/xmlUtils.js","../node_modules/@arcgis/core/layers/ogc/dateUtils.js","../node_modules/@arcgis/core/layers/ogc/wfsUtils.js"],"names":["E","constructor","this","_queryEngine","_customParameters","_snapshotFeatures","async","objectIdField","t","r","d","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","e","name","signal","g","i","a","_","geometryType","hasZ","n","spatialReference","u","s","geometry","p","c","h","o","f","_fieldsIndex","attributes","objectId","destroy","getFeatureUrl","getFeatureOutputFormat","fields","featureType","w","_checkProjection","l","hasM","timeInfo","featureStore","y","m","addMany","extent","fullExtent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","clear","getLogger","error","finished","_compareMinX","_compareMinY","_toBBox","_maxEntries","Math","max","_minEntries","ceil","_initFormat","prune","M","X","Y","all","_all","_data","search","children","length","leaf","x","push","pop","collides","load","insert","_build","slice","height","_splitRoot","_insert","b","remove","data","indexHint","splice","_condense","toJSON","fromJSON","pushArray","log","j","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minX","minY","maxX","maxY","deallocator","B","super","arguments","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","has","_loadIndex","Array","size","forEach","filter","fullBounds","values","valid","delete","get","forEachInBounds","invalidateIndex","set","geometryInfo","_boundsStore","_featuresById","_markedIds","Set","events","featureAdapter","numFeatures","storeStatistics","coords","featureCount","vertexCount","add","_add","_emitChanged","removeById","_remove","removeManyById","forEachBounds","getFeature","toArray","from","startMarkingUsedFeatures","sweep","emit","feature","displayId","onFeatureAdd","onFeatureRemove","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","type","features","coordinates","G","S","F","P","k","lengths","O","T","crs","properties","code","RegExp","test","L","id","Object","keys","alias","objectIdFieldName","objectIdFieldType","unknownFields","I","description","globalId","success","uniqueId","message","details","field","originalValue","sanitizedValue","editable","requiredFields","parseFloat","String","TypeError","simplify","localName","exec","groups","year","month","day","hours","minutes","seconds","ms","padEnd","substring","isUTC","Date","UTC","offsetSign","offsetHours","offsetMinutes","getTime","Number","isNaN","C","N","v","U","D","te","firstElementChild","ne","ae","FeatureTypeList","FeatureType","title","namespacePrefix","namespaceUri","supportedSpatialReferences","parseInt","textContent","match","wkid","Name","prefix","re","lookupNamespaceURI","Abstract","Title","WGS84BoundingBox","split","xmin","ymin","xmax","ymax","V","DefaultSRS","DefaultCRS","OtherSRS","OtherCRS","operations","featureTypes","readFeatureTypes","responseType","query","SERVICE","REQUEST","VERSION","DescribeFeatureType","url","GetFeature","$","GetCapabilities","outputFormat","supportsPagination","OperationsMetadata","Operation","DCP","HTTP","Get","Parameter","AllowedValues","Value","toLowerCase","Constraint","DefaultValue","W","WGS84","next","value","swapXY","geometryField","J","errors","z","q","wfsCapabilities","find","unshift","Promise","K","count","Z","toFixed","element","complexType","complexContent","extension","sequence","hasAttribute","simpleType","restriction","maxLength","nullable","XMLSerializer","serializeToString","H","document","Q","TYPENAME","replace","JSON","parse","response","TYPENAMES","OUTPUTFORMAT","SRSNAME","STARTINDEX","startIndex","COUNT","DOMParser","parseFromString","trim","Exception","ExceptionText"],"mappings":"gIAAA,gLAI+1B,MAAMA,EAAEC,cAAcC,KAAKC,aAAa,KAAKD,KAAKE,kBAAkB,KAAKF,KAAKG,kBAAkBC,UAAS,MAAC,MAAMC,cAAcC,GAAGN,KAAKC,aAAaM,QAAQC,YAAqB,OAApB,EAACR,KAAKS,gBAAc,EAAE,GAAGT,KAAKU,aAAaC,SAASX,KAAKY,wBAAwB,CAACC,iBAAiBb,KAAKE,kBAAkBY,WAAWd,KAAKC,aAAac,YAAYD,WAAWE,KAAKC,GAAGA,EAAEC,OAAOC,OAAOF,UAAUG,YAAEb,GAAGc,YAAEJ,GAAG,MAAMK,EAAEC,YAAEhB,EAAE,CAACiB,aAAaxB,KAAKC,aAAauB,aAAaC,MAAK,EAAGpB,cAAcC,IAAI,IAAIoB,YAAE1B,KAAKC,aAAa0B,iBAAiBC,KAAG,IAAI,MAAMP,KAAKC,EAAEO,YAAER,EAAES,YAAYT,EAAES,SAASC,YAAEC,YAAEC,YAAEZ,EAAES,SAAS9B,KAAKC,aAAauB,cAAa,GAAG,GAAII,IAAE5B,KAAKC,aAAa0B,oBAAoB,IAAIO,EAAE,EAAE,IAAI,MAAML,KAAKP,EAAE,CAAC,MAAML,EAAE,CAAC,EAAEkB,YAAEnC,KAAKoC,aAAanB,EAAEY,EAAEQ,YAAW,GAAIR,EAAEQ,WAAWpB,EAAE,MAAMY,EAAEQ,WAAW/B,KAAKuB,EAAES,SAAST,EAAEQ,WAAW/B,GAAG4B,IAAI,CAAC,OAAOZ,CAAC,CAAC,CAACiB,UAAS,MAAkB,OAAjB,EAAAvC,KAAKC,eAAL,EAAmBsC,UAAUvC,KAAKC,aAAa,IAAI,CAACG,WAAWa,EAAEX,GAAG,MAAMkC,cAAcjC,EAAEkC,uBAAuBZ,EAAEF,iBAAiBO,EAAEQ,OAAOhB,EAAEF,aAAaI,EAAEe,YAAYZ,EAAE1B,cAAc4B,EAAEpB,iBAAiBmB,GAAGf,EAAEjB,KAAKU,aAAaqB,EAAE/B,KAAKE,kBAAkB8B,EAAEhC,KAAKS,eAAeF,EAAEP,KAAKY,wBAAwBiB,EAAE7B,KAAKoC,aAAa,IAAIQ,IAAElB,SAAS1B,KAAK6C,iBAAiBX,GAAGb,YAAEf,GAAGN,KAAKC,aAAa,IAAI6C,IAAE,CAACJ,OAAOhB,EAAEF,aAAaI,EAAEmB,MAAK,EAAGtB,MAAK,EAAGpB,cAAc4B,EAAEN,iBAAiBO,EAAEc,SAAS,KAAKC,aAAa,IAAIC,IAAE,CAAC1B,aAAaI,EAAEmB,MAAK,EAAGtB,MAAK,MAAO,MAAM0B,QAAQnD,KAAKG,kBAAkBmB,YAAEhB,EAAEa,SAAS,OAAOnB,KAAKC,aAAagD,aAAaG,QAAQD,GAAG,CAACE,OAAOrD,KAAKC,aAAaqD,WAAW,CAAClD,mBAAmB,MAAM,IAAIE,IAAE,mCAAmC,4CAA4C,CAACF,oBAAoBa,EAAE,CAAC,EAAEX,EAAE,CAAC,GAAG,aAAaN,KAAKuD,wBAAwBvD,KAAKC,aAAauD,aAAavC,EAAEX,EAAEa,OAAO,CAACf,wBAAwBa,EAAE,CAAC,EAAEX,EAAE,CAAC,GAAG,aAAaN,KAAKuD,wBAAwBvD,KAAKC,aAAawD,qBAAqBxC,EAAEX,EAAEa,OAAO,CAACf,qBAAqBa,EAAE,CAAC,EAAEX,EAAE,CAAC,GAAG,aAAaN,KAAKuD,wBAAwBvD,KAAKC,aAAayD,mBAAmBzC,EAAEX,EAAEa,OAAO,CAACf,kBAAkBa,EAAE,CAAC,EAAEX,EAAE,CAAC,GAAG,aAAaN,KAAKuD,wBAAwBvD,KAAKC,aAAa0D,sBAAsB1C,EAAEX,EAAEa,OAAO,CAACf,oBAAoBa,EAAEX,EAAE,CAAC,GAAG,aAAaN,KAAKuD,wBAAwBvD,KAAKC,aAAa2D,wBAAwB3C,EAAEX,EAAEa,OAAO,CAACf,cAAcyB,GAAE,MAAC,OAAO7B,KAAKE,kBAAkB2B,EAAoB,OAAnB,EAAC7B,KAAK6D,gBAAL,EAAoBC,QAAQ9D,KAAK6D,cAAc5C,YAAEjB,KAAKG,mBAAmBH,KAAK6D,cAAcE,QAAQC,MAAM/C,IAAIjB,KAAKC,aAAagD,aAAagB,QAAQhD,GAAGjB,KAAKC,aAAagD,aAAaG,QAAQnC,EAAE,IAAIA,IAAIjB,KAAKC,aAAagD,aAAagB,QAAQ/B,YAAEjB,IAAIV,IAAE2D,UAAU,wBAAwBC,MAAM,IAAI7D,IAAE,6BAA6B,kDAAkD,CAAC6D,MAAMlD,IAAI,UAAUjB,KAAKuD,wBAAwB,CAACF,OAAOrD,KAAKC,aAAaqD,WAAW,CAAClD,8BAA8B,GAAGJ,KAAK6D,gBAAgB7D,KAAK6D,cAAcO,SAAS,CAAC,UAAUpE,KAAK6D,cAAcE,OAAc,CAAN,MAAM,CAAC,OAAO/D,KAAKuD,uBAAuB,CAAC,CAACnD,uBAAuBa,GAAG,UAAUkC,YAAEvB,IAAEX,EAA8F,CAA3F,MAAM,MAAM,IAAIX,IAAE,yBAAyB,2BAA2B,CAACqB,iBAAiBV,GAAG,CAAC,E,oCCJzyH,uEAIsM,MAAMgB,EAAElC,YAAYO,EAAE,EAAEe,GAAGrB,KAAKqE,aAAavB,EAAE9C,KAAKsE,aAAatC,EAAEhC,KAAKuE,QAAQjE,GAAGA,EAAEN,KAAKwE,YAAYC,KAAKC,IAAI,EAAEpE,GAAG,GAAGN,KAAK2E,YAAYF,KAAKC,IAAI,EAAED,KAAKG,KAAK,GAAG5E,KAAKwE,cAAcnD,IAAI,mBAAmBA,EAAErB,KAAKuE,QAAQlD,EAAErB,KAAK6E,YAAYxD,IAAIrB,KAAKiE,OAAO,CAAC1B,UAAUvC,KAAKiE,QAAQ7C,EAAE0D,QAAQC,EAAED,QAAQE,EAAEF,QAAQG,EAAEH,OAAO,CAACI,IAAI5E,GAAGN,KAAKmF,KAAKnF,KAAKoF,MAAM9E,EAAE,CAAC+E,OAAO/E,EAAEe,GAAG,IAAIK,EAAE1B,KAAKoF,MAAM,MAAMnE,EAAEjB,KAAKuE,QAAQ,GAAGpC,EAAE7B,EAAEoB,GAAG,IAAIN,EAAE6C,QAAQvC,GAAG,CAAC,IAAI,IAAIG,EAAE,EAAEI,EAAEP,EAAE4D,SAASC,OAAO1D,EAAEI,EAAEJ,IAAI,CAAC,MAAMI,EAAEP,EAAE4D,SAASzD,GAAGP,EAAEI,EAAE8D,KAAKvE,EAAEgB,GAAGA,EAAEE,EAAE7B,EAAEgB,KAAKI,EAAE8D,KAAKnE,EAAEY,GAAGwD,EAAEnF,EAAEgB,GAAGtB,KAAKmF,KAAKlD,EAAEZ,GAAGD,EAAEsE,KAAKzD,GAAG,CAACP,EAAEN,EAAEuE,KAAK,CAAC,CAACC,SAAStF,GAAG,IAAIe,EAAErB,KAAKoF,MAAM,MAAM1D,EAAE1B,KAAKuE,QAAQ,IAAIpC,EAAE7B,EAAEe,GAAG,OAAM,EAAG,IAAID,EAAE6C,QAAQ5C,GAAG,CAAC,IAAI,IAAIJ,EAAE,EAAEY,EAAER,EAAEiE,SAASC,OAAOtE,EAAEY,EAAEZ,IAAI,CAAC,MAAMY,EAAER,EAAEiE,SAASrE,GAAGgB,EAAEZ,EAAEmE,KAAK9D,EAAEG,GAAGA,EAAE,GAAGM,EAAE7B,EAAE2B,GAAG,CAAC,GAAGZ,EAAEmE,MAAMC,EAAEnF,EAAE2B,GAAG,OAAM,EAAGb,EAAEsE,KAAK7D,EAAE,CAAC,CAACR,EAAED,EAAEuE,KAAK,CAAC,OAAM,CAAE,CAACE,KAAKvF,GAAG,IAAIA,EAAEiF,OAAO,OAAOvF,KAAK,GAAGM,EAAEiF,OAAOvF,KAAK2E,YAAY,CAAC,IAAI,IAAItD,EAAE,EAAEK,EAAEpB,EAAEiF,OAAOlE,EAAEK,EAAEL,IAAIrB,KAAK8F,OAAOxF,EAAEe,IAAI,OAAOrB,IAAI,CAAC,IAAIqB,EAAErB,KAAK+F,OAAOzF,EAAE0F,MAAM,EAAE1F,EAAEiF,QAAQ,EAAEjF,EAAEiF,OAAO,EAAE,GAAG,GAAGvF,KAAKoF,MAAME,SAASC,OAAO,GAAGvF,KAAKoF,MAAMa,SAAS5E,EAAE4E,OAAOjG,KAAKkG,WAAWlG,KAAKoF,MAAM/D,OAAO,CAAC,GAAGrB,KAAKoF,MAAMa,OAAO5E,EAAE4E,OAAO,CAAC,MAAM3F,EAAEN,KAAKoF,MAAMpF,KAAKoF,MAAM/D,EAAEA,EAAEf,CAAC,CAACN,KAAKmG,QAAQ9E,EAAErB,KAAKoF,MAAMa,OAAO5E,EAAE4E,OAAO,GAAE,EAAG,MAAMjG,KAAKoF,MAAM/D,EAAE,OAAOrB,IAAI,CAAC8F,OAAOxF,GAAG,OAAOA,GAAGN,KAAKmG,QAAQ7F,EAAEN,KAAKoF,MAAMa,OAAO,GAAGjG,IAAI,CAACiE,QAAQ,OAAOjE,KAAKoF,MAAM,IAAIgB,EAAE,IAAIpG,IAAI,CAACqG,OAAOhF,GAAG,IAAIA,EAAE,OAAOrB,KAAK,IAAIiB,EAAEY,EAAE7B,KAAKoF,MAAMnD,EAAE,KAAKX,EAAE,EAAEf,GAAE,EAAG,MAAM2B,EAAElC,KAAKuE,QAAQlD,GAAG,IAAI2D,EAAEf,QAAQgB,EAAEhB,QAAQpC,GAAGmD,EAAEO,OAAO,GAAG,OAAC,GAAG1D,IAAIA,EAAEH,YAAEsD,EAAEW,OAAO1D,EAAE+C,EAAEsB,KAAKtB,EAAEO,OAAO,GAAGjE,EAAS,OAAR,EAAC2D,EAAEU,OAAK,EAAE,EAAEpF,GAAE,GAAIsB,EAAE2D,OAAOvE,EAAEX,YAAEuB,EAAEyD,SAASjE,EAAEQ,EAAEyD,SAASC,OAAO1D,EAAE0E,YAAY,IAAItF,GAAG,OAAOY,EAAEyD,SAASkB,OAAOvF,EAAE,GAAG+D,EAAEU,KAAK7D,GAAG7B,KAAKyG,UAAUzB,GAAGhF,KAAKO,GAAGsB,EAAE2D,OAAOC,EAAE5D,EAAEK,GAAGD,GAAGX,IAAIO,EAAEI,EAAEqD,SAAShE,GAAGf,GAAE,GAAIsB,EAAE,MAAMmD,EAAEU,KAAK7D,GAAGoD,EAAES,KAAKpE,GAAGA,EAAE,EAAEW,EAAEJ,EAAEA,EAAEA,EAAEyD,SAAS,GAAG,CAAC,OAAOtF,IAAI,CAAC0G,SAAS,OAAO1G,KAAKoF,KAAK,CAACuB,SAASrG,GAAG,OAAON,KAAKoF,MAAM9E,EAAEN,IAAI,CAACmF,KAAK7E,EAAEe,GAAG,IAAIK,EAAEpB,EAAE,IAAIyE,EAAEd,QAAQvC,GAAG,OAAC,IAAG,IAAKA,EAAE8D,KAAK,IAAI,MAAMlF,KAAKoB,EAAE4D,SAASjE,EAAEf,QAAQyE,EAAE6B,UAAUlF,EAAE4D,UAAU5D,EAAS,OAAR,EAACqD,EAAEY,OAAK,EAAE,IAAI,CAAC,CAACI,OAAOzF,EAAEe,EAAEK,EAAET,GAAG,MAAMY,EAAEH,EAAEL,EAAE,EAAE,IAAIY,EAAEjC,KAAKwE,YAAY,GAAG3C,GAAGI,EAAE,CAAC,MAAMhB,EAAE,IAAImF,EAAE9F,EAAE0F,MAAM3E,EAAEK,EAAE,IAAI,OAAOJ,EAAEL,EAAEjB,KAAKuE,SAAStD,CAAC,CAACA,IAAIA,EAAEwD,KAAKG,KAAKH,KAAKoC,IAAIhF,GAAG4C,KAAKoC,IAAI5E,IAAIA,EAAEwC,KAAKG,KAAK/C,EAAEI,IAAIhB,EAAE,KAAK,MAAMV,EAAE,IAAIuG,EAAE,IAAIvG,EAAE0F,OAAOhF,EAAE,MAAMiB,EAAEuC,KAAKG,KAAK/C,EAAEI,GAAGa,EAAEZ,EAAEuC,KAAKG,KAAKH,KAAKsC,KAAK9E,IAAIF,EAAEzB,EAAEe,EAAEK,EAAEoB,EAAE9C,KAAKqE,cAAc,IAAI,IAAI/C,EAAED,EAAEC,GAAGI,EAAEJ,GAAGwB,EAAE,CAAC,MAAMzB,EAAEoD,KAAKuC,IAAI1F,EAAEwB,EAAE,EAAEpB,GAAGK,EAAEzB,EAAEgB,EAAED,EAAEa,EAAElC,KAAKsE,cAAc,IAAI,IAAI5C,EAAEJ,EAAEI,GAAGL,EAAEK,GAAGQ,EAAE,CAAC,MAAML,EAAE4C,KAAKuC,IAAItF,EAAEQ,EAAE,EAAEb,GAAGd,EAAE+E,SAASI,KAAK1F,KAAK+F,OAAOzF,EAAEoB,EAAEG,EAAEZ,EAAE,GAAG,CAAC,CAAC,OAAOK,EAAEf,EAAEP,KAAKuE,SAAShE,CAAC,CAAC0G,eAAe3G,EAAEe,EAAEK,EAAET,GAAG,KAAKA,EAAEyE,KAAKrE,IAAG,IAAKA,EAAEmE,MAAMvE,EAAEsE,OAAO,IAAI7D,GAAG,CAAC,IAAIA,EAAET,EAAE,IAAIY,EAAE,IAAI,IAAI,IAAII,EAAE,EAAEX,EAAED,EAAEiE,SAASC,OAAOtD,EAAEX,EAAEW,IAAI,CAAC,MAAMX,EAAED,EAAEiE,SAASrD,GAAG1B,EAAE4C,EAAE7B,GAAGY,EAAEN,EAAEtB,EAAEgB,GAAGf,EAAE2B,EAAEL,GAAGA,EAAEK,EAAEjB,EAAEV,EAAEU,EAAEV,EAAEU,EAAES,EAAEJ,GAAGY,IAAIL,GAAGtB,EAAEU,IAAIA,EAAEV,EAAEmB,EAAEJ,EAAE,CAACD,EAAEK,GAAGL,EAAEiE,SAAS,EAAE,CAAC,OAAOjE,CAAC,CAAC8E,QAAQ7F,EAAEe,EAAEK,GAAG,MAAMT,EAAEjB,KAAKuE,QAAQ1C,EAAEH,EAAEpB,EAAEW,EAAEX,GAAG0E,EAAEf,QAAQ,MAAMhC,EAAEjC,KAAKiH,eAAepF,EAAE7B,KAAKoF,MAAM/D,EAAE2D,GAAG,IAAI/C,EAAEqD,SAASI,KAAKpF,GAAG4B,EAAED,EAAEJ,GAAGR,GAAG,GAAG2D,EAAEsB,KAAKjF,GAAGiE,SAASC,OAAOvF,KAAKwE,aAAaxE,KAAKkH,OAAOlC,EAAE3D,GAAGA,IAAIrB,KAAKmH,oBAAoBtF,EAAEmD,EAAE3D,EAAE,CAAC6F,OAAO5G,EAAEe,GAAG,MAAMK,EAAEpB,EAAEgG,KAAKjF,GAAGJ,EAAES,EAAE4D,SAASC,OAAO1D,EAAE7B,KAAK2E,YAAY3E,KAAKoH,iBAAiB1F,EAAEG,EAAEZ,GAAG,MAAMgB,EAAEjC,KAAKqH,kBAAkB3F,EAAEG,EAAEZ,GAAG,IAAIgB,EAAE,YAAYqF,QAAQT,IAAI,yEAAyE,MAAMtG,EAAEmB,EAAE4D,SAASkB,OAAOvE,EAAEP,EAAE4D,SAASC,OAAOtD,GAAGC,EAAER,EAAE8D,KAAK,IAAIY,EAAE7F,GAAG,IAAIuG,EAAEvG,GAAG2B,EAAE+D,OAAOvE,EAAEuE,OAAO3E,EAAEI,EAAE1B,KAAKuE,SAASjD,EAAEY,EAAElC,KAAKuE,SAASlD,EAAEf,EAAEgG,KAAKjF,EAAE,GAAGiE,SAASI,KAAKxD,GAAGlC,KAAKkG,WAAWxE,EAAEQ,EAAE,CAACgE,WAAW5F,EAAEe,GAAGrB,KAAKoF,MAAM,IAAI0B,EAAE,CAACxG,EAAEe,IAAIrB,KAAKoF,MAAMa,OAAO3F,EAAE2F,OAAO,EAAE3E,EAAEtB,KAAKoF,MAAMpF,KAAKuE,QAAQ,CAAC8C,kBAAkB/G,EAAEe,EAAEK,GAAG,IAAIT,EAAEY,EAAEI,EAAEhB,EAAEY,EAAE,IAAI,IAAI,IAAIP,EAAED,EAAEC,GAAGI,EAAEL,EAAEC,IAAI,CAAC,MAAMD,EAAEd,EAAED,EAAE,EAAEgB,EAAEtB,KAAKuE,SAASrC,EAAE3B,EAAED,EAAEgB,EAAEI,EAAE1B,KAAKuE,SAASzB,EAAEvB,EAAEF,EAAEa,GAAGF,EAAEmB,EAAE9B,GAAG8B,EAAEjB,GAAGY,EAAE7B,GAAGA,EAAE6B,EAAEb,EAAEX,EAAEO,EAAEG,EAAEH,EAAEG,EAAEH,GAAGiB,IAAI7B,GAAGe,EAAEH,IAAIA,EAAEG,EAAEC,EAAEX,EAAE,CAAC,OAAOW,CAAC,CAACmF,iBAAiB9G,EAAEe,EAAEK,GAAG,MAAMT,EAAEX,EAAEkF,KAAKxF,KAAKqE,aAAavB,EAAEjB,EAAEvB,EAAEkF,KAAKxF,KAAKsE,aAAatC,EAAEhC,KAAKuH,eAAejH,EAAEe,EAAEK,EAAET,GAAGjB,KAAKuH,eAAejH,EAAEe,EAAEK,EAAEG,IAAIvB,EAAEgF,SAASkC,KAAKvG,EAAE,CAACsG,eAAejH,EAAEe,EAAEK,EAAET,GAAGX,EAAEgF,SAASkC,KAAKvG,GAAG,MAAMY,EAAE7B,KAAKuE,QAAQtC,EAAE1B,EAAED,EAAE,EAAEe,EAAEQ,GAAGP,EAAEf,EAAED,EAAEoB,EAAEL,EAAEK,EAAEG,GAAG,IAAIiB,EAAEtC,EAAEyB,GAAGzB,EAAEc,GAAG,IAAI,IAAIf,EAAEc,EAAEd,EAAEmB,EAAEL,EAAEd,IAAI,CAAC,MAAMc,EAAEf,EAAEgF,SAAS/E,GAAG2B,EAAED,EAAE3B,EAAEkF,KAAK3D,EAAER,GAAGA,GAAGyB,GAAGtC,EAAEyB,EAAE,CAAC,IAAI,IAAI1B,EAAEmB,EAAEL,EAAE,EAAEd,GAAGc,EAAEd,IAAI,CAAC,MAAMc,EAAEf,EAAEgF,SAAS/E,GAAG2B,EAAEZ,EAAEhB,EAAEkF,KAAK3D,EAAER,GAAGA,GAAGyB,GAAGtC,EAAEc,EAAE,CAAC,OAAOwB,CAAC,CAACqE,oBAAoB7G,EAAEe,EAAEK,GAAG,IAAI,IAAIT,EAAES,EAAET,GAAG,EAAEA,IAAIiB,EAAEb,EAAEiF,KAAKrF,GAAGX,EAAE,CAACmG,UAAUpF,GAAG,IAAI,IAAIK,EAAEL,EAAEkE,OAAO,EAAE7D,GAAG,EAAEA,IAAI,CAAC,MAAMT,EAAEI,EAAEiF,KAAK5E,GAAG,GAAG,IAAIT,EAAEqE,SAASC,OAAO,GAAG7D,EAAE,EAAE,CAAC,MAAMG,EAAER,EAAEiF,KAAK5E,EAAE,GAAGO,EAAEJ,EAAEyD,SAASrD,EAAEuE,OAAOlG,YAAE2B,EAAEhB,EAAEgB,EAAEsD,OAAO1D,EAAE0E,WAAW,EAAE,MAAMvG,KAAKiE,aAAa3C,EAAEL,EAAEjB,KAAKuE,QAAQ,CAAC,CAACM,YAAYvE,GAAG,MAAMe,EAAE,CAAC,WAAW,OAAO,KAAKrB,KAAKqE,aAAa,IAAIoD,SAAS,IAAI,IAAIpG,EAAEqG,KAAKpH,EAAE,KAAKN,KAAKsE,aAAa,IAAImD,SAAS,IAAI,IAAIpG,EAAEqG,KAAKpH,EAAE,KAAKN,KAAKuE,QAAQ,IAAIkD,SAAS,IAAI,kBAAkBnH,EAAE,GAAG,YAAYA,EAAE,GAAG,YAAYA,EAAE,GAAG,YAAYA,EAAE,GAAG,KAAK,EAAE,SAASgB,EAAEhB,EAAEe,GAAGd,EAAED,EAAE,EAAEA,EAAEgF,SAASC,OAAOlE,EAAEf,EAAE,CAAC,SAASC,EAAED,EAAEe,EAAEK,EAAET,EAAEY,GAAGA,IAAIA,EAAE,IAAIuE,EAAE,KAAKvE,EAAE8F,KAAK,IAAI9F,EAAE+F,KAAK,IAAI/F,EAAEgG,MAAK,IAAKhG,EAAEiG,MAAK,IAAK,IAAI,IAAI7F,EAAEX,EAAED,EAAEC,EAAEI,EAAEJ,IAAIW,EAAE3B,EAAEgF,SAAShE,GAAGY,EAAEL,EAAEvB,EAAEkF,KAAKvE,EAAEgB,GAAGA,GAAG,OAAOJ,CAAC,CAAC,SAASK,EAAE5B,EAAEe,GAAGf,EAAEqH,KAAKlD,KAAKuC,IAAI1G,EAAEqH,KAAKtG,EAAEsG,MAAMrH,EAAEsH,KAAKnD,KAAKuC,IAAI1G,EAAEsH,KAAKvG,EAAEuG,MAAMtH,EAAEuH,KAAKpD,KAAKC,IAAIpE,EAAEuH,KAAKxG,EAAEwG,MAAMvH,EAAEwH,KAAKrD,KAAKC,IAAIpE,EAAEwH,KAAKzG,EAAEyG,KAAK,CAAC,SAAShF,EAAExC,EAAEe,GAAG,OAAOf,EAAEqH,KAAKtG,EAAEsG,IAAI,CAAC,SAAS3F,EAAE1B,EAAEe,GAAG,OAAOf,EAAEsH,KAAKvG,EAAEuG,IAAI,CAAC,SAASzE,EAAE7C,GAAG,OAAOA,EAAEuH,KAAKvH,EAAEqH,OAAOrH,EAAEwH,KAAKxH,EAAEsH,KAAK,CAAC,SAASpH,EAAEF,GAAG,OAAOA,EAAEuH,KAAKvH,EAAEqH,MAAMrH,EAAEwH,KAAKxH,EAAEsH,KAAK,CAAC,SAAShG,EAAEtB,EAAEe,GAAG,OAAOoD,KAAKC,IAAIrD,EAAEwG,KAAKvH,EAAEuH,MAAMpD,KAAKuC,IAAI3F,EAAEsG,KAAKrH,EAAEqH,QAAQlD,KAAKC,IAAIrD,EAAEyG,KAAKxH,EAAEwH,MAAMrD,KAAKuC,IAAI3F,EAAEuG,KAAKtH,EAAEsH,MAAM,CAAC,SAASrG,EAAEjB,EAAEe,GAAG,MAAMK,EAAE+C,KAAKC,IAAIpE,EAAEqH,KAAKtG,EAAEsG,MAAM1G,EAAEwD,KAAKC,IAAIpE,EAAEsH,KAAKvG,EAAEuG,MAAM/F,EAAE4C,KAAKuC,IAAI1G,EAAEuH,KAAKxG,EAAEwG,MAAM5F,EAAEwC,KAAKuC,IAAI1G,EAAEwH,KAAKzG,EAAEyG,MAAM,OAAOrD,KAAKC,IAAI,EAAE7C,EAAEH,GAAG+C,KAAKC,IAAI,EAAEzC,EAAEhB,EAAE,CAAC,SAASwE,EAAEnF,EAAEe,GAAG,OAAOf,EAAEqH,MAAMtG,EAAEsG,MAAMrH,EAAEsH,MAAMvG,EAAEuG,MAAMvG,EAAEwG,MAAMvH,EAAEuH,MAAMxG,EAAEyG,MAAMxH,EAAEwH,IAAI,CAAC,SAAS3F,EAAE7B,EAAEe,GAAG,OAAOA,EAAEsG,MAAMrH,EAAEuH,MAAMxG,EAAEuG,MAAMtH,EAAEwH,MAAMzG,EAAEwG,MAAMvH,EAAEqH,MAAMtG,EAAEyG,MAAMxH,EAAEsH,IAAI,CAAC,SAAS7F,EAAEzB,EAAEe,EAAEJ,EAAEgB,EAAEX,GAAG,MAAMf,EAAE,CAACc,EAAEJ,GAAG,KAAKV,EAAEgF,QAAQ,CAAC,MAAMlE,EAAEK,YAAEnB,EAAEoF,OAAO1E,EAAES,YAAEnB,EAAEoF,OAAO,GAAGtE,EAAEJ,GAAGgB,EAAE,SAAS,MAAMC,EAAEjB,EAAEwD,KAAKG,MAAMvD,EAAEJ,GAAGgB,EAAE,GAAGA,EAAEJ,YAAEvB,EAAE4B,EAAEjB,EAAEI,EAAEC,GAAGf,EAAEmF,KAAKzE,EAAEiB,EAAEA,EAAEb,EAAE,CAAC,CAAC,MAAMD,EAAE,IAAIH,IAAE8D,EAAE,IAAI9D,IAAE+D,EAAE,IAAI/D,IAAEgE,EAAE,IAAIhE,IAAE,CAAC8G,iBAAY,IAAS,MAAMC,EAAEjI,cAAcC,KAAK2H,KAAK,IAAI3H,KAAK4H,KAAK,IAAI5H,KAAK6H,MAAK,IAAK7H,KAAK8H,MAAK,GAAI,EAAE,MAAMlF,UAAUoF,EAAEjI,cAAckI,SAASC,WAAWlI,KAAKiG,OAAO,EAAEjG,KAAKuG,UAAU,IAAIlF,GAAC,EAAE,MAAM+E,UAAUxD,EAAE7C,YAAYO,GAAG2H,QAAQjI,KAAKsF,SAAShF,EAAEN,KAAKwF,MAAK,CAAE,EAAE,MAAMsB,UAAUlE,EAAE7C,YAAYO,GAAG2H,QAAQjI,KAAKsF,SAAShF,EAAEN,KAAKwF,MAAK,CAAE,E,oCCJ3pM,yEAI+M,MAAMnE,EAAE,CAAC8G,YAAY7H,GAAGA,EAAEgC,SAAS8F,cAAc9H,GAAGA,EAAE+B,WAAWgG,aAAa,CAAC/H,EAAEW,IAAIX,EAAE+B,WAAWpB,GAAGqH,kBAAkB,CAAChI,EAAEW,IAAI,IAAIV,IAAEU,EAAEX,EAAE+B,WAAW,KAAK/B,EAAEgC,UAAUiG,YAAYjI,GAAGA,EAAEwB,SAAS0G,YAAY,CAACjI,EAAEc,KAAKf,YAAEC,EAAEkI,YAAYlI,EAAEkI,SAASxH,YAAE,IAAIiB,IAAE3B,EAAEuB,SAAST,EAAEI,KAAKJ,EAAE0B,OAAOxC,EAAEkI,U,oCCJje,gEAIgL,MAAY/G,EAAE,CAACiG,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,GAAiE,SAAS7G,EAAEI,EAAEQ,EAAErB,IAA7E,SAAWa,GAAGK,EAAEiG,KAAKtG,EAAE,GAAGK,EAAEkG,KAAKvG,EAAE,GAAGK,EAAEmG,KAAKxG,EAAE,GAAGK,EAAEoG,KAAKzG,EAAE,EAAE,EAAmBf,CAAEuB,GAAGR,EAAEgE,OAAO3D,EAAElB,EAAE,CAAC,MAAM0B,EAAEnC,cAAcC,KAAK0I,eAAc,EAAG1I,KAAK2I,cAAc,GAAG3I,KAAK4I,YAAY,IAAIC,IAAI7I,KAAK8I,YAAY,IAAID,IAAI7I,KAAK+I,OAAO,IAAI1H,IAAE,EAAE2H,YAAI,yBAAyB3H,IAAC,CAAIsG,KAAKtG,EAAE,GAAGuG,KAAKvG,EAAE,GAAGwG,KAAKxG,EAAE,GAAGyG,KAAKzG,EAAE,KAAK,CAAC,MAAM,MAAM,MAAM,QAAQrB,KAAKiJ,WAAW,KAAK,GAAGjJ,KAAK0I,cAAc,CAAC,MAAMrH,EAAE,IAAI6H,MAAMlJ,KAAK8I,YAAYK,MAAM,IAAItH,EAAE,EAAE7B,KAAK8I,YAAYM,SAAS,CAAC5I,EAAEkB,KAAKL,EAAEQ,KAAKH,CAAC,IAAI1B,KAAK0I,eAAc,EAAG1I,KAAK+I,OAAO9E,QAAQjE,KAAK+I,OAAOlD,KAAKxE,EAAE,MAAMrB,KAAK2I,cAAcpD,SAASvF,KAAK+I,OAAOlD,KAAK7F,KAAK2I,cAAcU,QAAQhI,GAAGrB,KAAK8I,YAAYE,IAAI3H,MAAMrB,KAAK2I,cAAcpD,OAAO,EAAE,CAAC,CAAK+D,iBAAa,IAAItJ,KAAK4I,YAAYO,KAAK,OAAO,KAAK,MAAM9H,EAAEQ,cAAI,IAAI,MAAMA,KAAK7B,KAAK4I,YAAYW,SAAS1H,IAAIR,EAAE,GAAGoD,KAAKuC,IAAInF,EAAE,GAAGR,EAAE,IAAIA,EAAE,GAAGoD,KAAKuC,IAAInF,EAAE,GAAGR,EAAE,IAAIA,EAAE,GAAGoD,KAAKC,IAAI7C,EAAE,GAAGR,EAAE,IAAIA,EAAE,GAAGoD,KAAKC,IAAI7C,EAAE,GAAGR,EAAE,KAAK,OAAOA,CAAC,CAAKmI,YAAQ,OAAOxJ,KAAK0I,aAAa,CAACzE,QAAQjE,KAAK0I,eAAc,EAAG1I,KAAK2I,cAAcpD,OAAO,EAAEvF,KAAK4I,YAAY3E,QAAQjE,KAAK8I,YAAY7E,QAAQjE,KAAK+I,OAAO9E,OAAO,CAACwF,OAAOpI,GAAG,MAAMQ,EAAE7B,KAAK4I,YAAYc,IAAIrI,GAAGrB,KAAK4I,YAAYa,OAAOpI,GAAGQ,IAAI7B,KAAK8I,YAAYW,OAAO5H,GAAG7B,KAAK0I,eAAe1I,KAAK+I,OAAO1C,OAAOxE,GAAG,CAAC8H,gBAAgBtI,EAAEQ,GAAG7B,KAAKiJ,aAAahI,EAAEjB,KAAK+I,OAAO1H,GAAGA,GAAGQ,EAAE7B,KAAK8I,YAAYY,IAAIrI,KAAK,CAACqI,IAAIrI,GAAG,OAAOrB,KAAK4I,YAAYc,IAAIrI,EAAE,CAAC2H,IAAI3H,GAAG,OAAOrB,KAAK4I,YAAYI,IAAI3H,EAAE,CAACuI,kBAAkB5J,KAAK0I,gBAAgB1I,KAAK0I,eAAc,EAAG1I,KAAK2I,cAAcpD,OAAO,EAAE,CAACsE,IAAIxI,EAAEQ,GAAG,IAAI7B,KAAK0I,cAAc,CAAC,MAAM7G,EAAE7B,KAAK4I,YAAYc,IAAIrI,GAAGQ,IAAI7B,KAAK+I,OAAO1C,OAAOxE,GAAG7B,KAAK8I,YAAYW,OAAO5H,GAAG,CAAC7B,KAAK4I,YAAYiB,IAAIxI,EAAEQ,GAAGA,IAAI7B,KAAK8I,YAAYe,IAAIhI,EAAER,GAAGrB,KAAK0I,gBAAgB1I,KAAK2I,cAAcjD,KAAK7D,GAAG7B,KAAK2I,cAAcpD,OAA3sD,KAAqtDvF,KAAKiJ,cAAc,E,oCCJh6D,mHAIkhB,MAAMrH,EAAE7B,YAAYkB,GAAGjB,KAAK8J,aAAa7I,EAAEjB,KAAK+J,aAAa,IAAIrI,IAAE1B,KAAKgK,cAAc,IAAInB,IAAI7I,KAAKiK,WAAW,IAAIC,IAAIlK,KAAKmK,OAAO,IAAI7J,IAAEN,KAAKoK,eAAenI,GAAC,CAAKT,mBAAe,OAAOxB,KAAK8J,aAAatI,YAAY,CAAKuB,WAAO,OAAO/C,KAAK8J,aAAa/G,IAAI,CAAKtB,WAAO,OAAOzB,KAAK8J,aAAarI,IAAI,CAAK4I,kBAAc,OAAOrK,KAAKgK,cAAcb,IAAI,CAAKG,iBAAa,OAAOtJ,KAAK+J,aAAaT,UAAU,CAAKgB,sBAAkB,IAAIrJ,EAAE,EAAE,OAAOjB,KAAKgK,cAAcZ,SAAS9I,IAAIuB,YAAEvB,EAAEwB,WAAWxB,EAAEwB,SAASyI,SAAStJ,GAAGX,EAAEwB,SAASyI,OAAOhF,OAAO,IAAI,CAACiF,aAAaxK,KAAKgK,cAAcb,KAAKsB,YAAYxJ,GAAGjB,KAAKyB,KAAKzB,KAAK+C,KAAK,EAAE,EAAE/C,KAAK+C,KAAK,EAAE,GAAG,CAAC2H,IAAIzJ,GAAGjB,KAAK2K,KAAK1J,GAAGjB,KAAK4K,cAAc,CAACxH,QAAQnC,GAAG,IAAI,MAAMX,KAAKW,EAAEjB,KAAK2K,KAAKrK,GAAGN,KAAK4K,cAAc,CAAC3G,QAAQjE,KAAKgK,cAAc/F,QAAQjE,KAAK+J,aAAa9F,QAAQjE,KAAK4K,cAAc,CAACC,WAAW5J,GAAG,MAAMX,EAAEN,KAAKgK,cAAcN,IAAIzI,GAAG,OAAOX,GAAGN,KAAK8K,QAAQxK,GAAGN,KAAK4K,eAAetK,GAAG,IAAI,CAACyK,eAAe9J,GAAGjB,KAAK+J,aAAaH,kBAAkB,IAAI,MAAMtJ,KAAKW,EAAE,CAAC,MAAMA,EAAEjB,KAAKgK,cAAcN,IAAIpJ,GAAGW,GAAGjB,KAAK8K,QAAQ7J,EAAE,CAACjB,KAAK4K,cAAc,CAACI,cAAc/J,EAAEX,EAAEC,GAAG,IAAI,MAAMsB,KAAKZ,EAAE,CAAC,MAAMA,EAAEjB,KAAK+J,aAAaL,IAAI7H,EAAES,UAAUrB,GAAGX,EAAEe,YAAEd,EAAEU,GAAG,CAAC,CAACgK,WAAWhK,GAAG,OAAOjB,KAAKgK,cAAcN,IAAIzI,EAAE,CAAC+H,IAAI/H,GAAG,OAAOjB,KAAKgK,cAAchB,IAAI/H,EAAE,CAACiK,UAAU,OAAOhC,MAAMiC,KAAKnL,KAAKgK,cAAcT,SAAS,CAACH,QAAQnI,GAAGjB,KAAKgK,cAAcZ,SAAS9I,GAAGW,EAAEX,IAAI,CAACqJ,gBAAgB1I,EAAEX,GAAGN,KAAK+J,aAAaJ,gBAAgB1I,GAAGA,IAAIX,EAAEN,KAAKgK,cAAcN,IAAIzI,GAAG,GAAG,CAACmK,2BAA2BpL,KAAK+J,aAAaH,kBAAkB5J,KAAKiK,WAAWhG,OAAO,CAACoH,QAAQ,IAAIpK,GAAE,EAAGjB,KAAKgK,cAAcZ,SAAS,CAAC9I,EAAEC,KAAKP,KAAKiK,WAAWjB,IAAIzI,KAAKU,GAAE,EAAGjB,KAAK8K,QAAQxK,GAAG,IAAIN,KAAKiK,WAAWhG,QAAQhD,GAAGjB,KAAK4K,cAAc,CAACA,eAAe5K,KAAKmK,OAAOmB,KAAK,eAAU,EAAO,CAACX,KAAKrK,GAAG,IAAIA,EAAE,OAAO,MAAMe,EAAEf,EAAEgC,SAAS,GAAG,MAAMjB,EAAE,YAAYd,IAAE2D,UAAU,0CAA0CC,MAAM,IAAIlD,IAAE,+BAA+B,wBAAwB,CAACsK,QAAQjL,KAAK,MAAMoB,EAAE1B,KAAKgK,cAAcN,IAAIrI,GAAG,IAAIY,EAAE,GAAGjC,KAAKiK,WAAWS,IAAIrJ,GAAGK,GAAGpB,EAAEkL,UAAU9J,EAAE8J,UAAUvJ,EAAEjC,KAAK+J,aAAaL,IAAIrI,GAAGrB,KAAK+J,aAAaN,OAAOpI,IAAIQ,YAAE7B,KAAKyL,eAAezL,KAAKyL,aAAanL,GAAG4B,YAAE5B,EAAEwB,YAAYxB,EAAEwB,SAASyI,SAASjK,EAAEwB,SAASyI,OAAOhF,OAAO,OAAOvF,KAAK+J,aAAaF,IAAIxI,EAAE,WAAWrB,KAAKgK,cAAcH,IAAIxI,EAAEf,GAAG2B,EAAEX,YAAEO,YAAEI,GAAGA,EAAEzB,cAAIF,EAAEwB,SAAS9B,KAAK8J,aAAarI,KAAKzB,KAAK8J,aAAa/G,MAAMlB,YAAEI,IAAIjC,KAAK+J,aAAaF,IAAIxI,EAAEY,GAAGjC,KAAKgK,cAAcH,IAAIxI,EAAEf,EAAE,CAACwK,QAAQ7J,GAAG,OAAOY,YAAE7B,KAAK0L,kBAAkB1L,KAAK0L,gBAAgBzK,GAAGjB,KAAKiK,WAAWR,OAAOxI,EAAEqB,UAAUtC,KAAK+J,aAAaN,OAAOxI,EAAEqB,UAAUtC,KAAKgK,cAAcP,OAAOxI,EAAEqB,UAAUrB,CAAC,E,oCCJjhG,8KAIwO,MAAMI,EAAE,CAACsK,WAAW,uBAAuBC,gBAAgB,uBAAuBC,WAAW,yBAAyBC,MAAM,oBAAoBC,QAAQ,sBAAsBC,aAAa,uBAAuB,SAASnK,EAAEZ,GAAG,OAAOI,EAAEJ,EAAE,CAAC,SAASe,EAAEf,GAAG,OAAOA,EAAEgL,MAAM,IAAI,gBAAgBhL,EAAE,MAAM,IAAI,oBAAoB,IAAI,MAAMX,KAAKW,EAAEiL,SAAS5L,UAAUA,GAAG,CAAC,SAASsB,EAAEX,GAAG,IAAIA,EAAE,OAAO,KAAK,OAAOA,EAAEgL,MAAM,IAAI,cAAchL,EAAEkL,YAAY,MAAM,IAAI,aAAa,IAAI,mBAAmBlL,EAAEkL,YAAY,MAAM,IAAI,kBAAkB,IAAI,UAAU,IAAI,MAAM7L,KAAKW,EAAEkL,kBAAkB7L,EAAE,MAAM,IAAI,eAAe,IAAI,MAAMA,KAAKW,EAAEkL,YAAY,IAAI,MAAMlL,KAAKX,QAAQW,EAAE,CAAmQ,SAASkB,EAAElB,GAAG,IAAI,MAAMX,KAAKW,EAAE,GAAGX,EAAEiF,OAAO,EAAE,OAAM,EAAG,OAAM,CAAE,CAAqD,SAASxD,EAAEd,GAAG,IAAIX,EAAE,EAAE,IAAI,IAAIoB,EAAE,EAAEA,EAAET,EAAEsE,OAAO7D,IAAI,CAAC,MAAMQ,EAAEjB,EAAES,GAAGnB,EAAEU,GAAGS,EAAE,GAAGT,EAAEsE,QAAQjF,GAAG4B,EAAE,GAAG3B,EAAE,GAAGA,EAAE,GAAG2B,EAAE,EAAE,CAAC,OAAO5B,GAAG,CAAC,CAAC,SAASE,EAAES,GAAG,MAAMX,EAAEW,EAAE,GAAGS,EAAET,EAAEA,EAAEsE,OAAO,GAAG,OAAOjF,EAAE,KAAKoB,EAAE,IAAIpB,EAAE,KAAKoB,EAAE,IAAIpB,EAAE,KAAKoB,EAAE,IAAIT,EAAEyE,KAAKpF,GAAGW,CAAC,CAAC,SAASG,EAAEH,EAAEX,EAAEoB,GAAG,OAAOpB,EAAE2L,MAAM,IAAI,aAAmE,IAAI,aAAa,OAA+N,SAAWhL,EAAEX,EAAEoB,GAAG,OAAO0K,EAAEnL,EAAEX,EAAE6L,YAAYzK,GAAGT,CAAC,CAAvQ2B,CAAE3B,EAAEX,EAAEoB,GAApE,IAAI,kBAAkB,OAA+L,SAAWT,EAAEX,EAAEoB,GAAG,IAAI,MAAMQ,KAAK5B,EAAE6L,YAAYC,EAAEnL,EAAEiB,EAAER,GAAG,OAAOT,CAAC,CAAxPgB,CAAEhB,EAAEX,EAAEoB,GAAoC,IAAI,eAAe,OAA4O,SAAWT,EAAEX,EAAEoB,GAAG,IAAI,MAAMQ,KAAK5B,EAAE6L,YAAY,CAACE,EAAEpL,EAAEiB,EAAE,GAAGR,GAAG,IAAI,IAAIpB,EAAE,EAAEA,EAAE4B,EAAEqD,OAAOjF,IAAIgM,EAAErL,EAAEiB,EAAE5B,GAAGoB,EAAE,CAAC,OAAOT,CAAC,CAAhVsL,CAAEtL,EAAEX,EAAEoB,GAAG,IAAI,QAAQ,OAA4T,SAAWT,EAAEX,EAAEoB,GAAG,OAAO8K,EAAEvL,EAAEX,EAAE6L,YAAYzK,GAAGT,CAAC,CAApWmF,CAAEnF,EAAEX,EAAEoB,GAAG,IAAI,UAAU,OAA8U,SAAWT,EAAEX,EAAEoB,GAAG,MAAMQ,EAAE5B,EAAE6L,YAAYE,EAAEpL,EAAEiB,EAAE,GAAGR,GAAG,IAAI,IAAInB,EAAE,EAAEA,EAAE2B,EAAEqD,OAAOhF,IAAI+L,EAAErL,EAAEiB,EAAE3B,GAAGmB,GAAG,OAAOT,CAAC,CAA1a6F,CAAE7F,EAAEX,EAAEoB,GAAG,CAAka,SAAS2K,EAAEpL,EAAEX,EAAEoB,GAAG,MAAMQ,EAAE1B,EAAEF,IAAn7B,SAAWW,GAAG,OAAOc,EAAEd,EAAE,CAA65BK,CAAEY,GAAYkK,EAAEnL,EAAEiB,EAAER,GAAfqD,EAAE9D,EAAEiB,EAAER,EAAW,CAAC,SAAS4K,EAAErL,EAAEX,EAAEoB,GAAG,MAAMQ,EAAE1B,EAAEF,IAA/8B,SAAWW,GAAG,OAAOc,EAAEd,EAAE,CAAy7BiC,CAAEhB,GAAYkK,EAAEnL,EAAEiB,EAAER,GAAfqD,EAAE9D,EAAEiB,EAAER,EAAW,CAAC,SAAS0K,EAAEnL,EAAEX,EAAEoB,GAAG,IAAI,MAAMQ,KAAK5B,EAAEkM,EAAEvL,EAAEiB,EAAER,GAAGT,EAAEwL,QAAQ/G,KAAKpF,EAAEiF,OAAO,CAAC,SAASR,EAAE9D,EAAEX,EAAEoB,GAAG,IAAI,IAAIQ,EAAE5B,EAAEiF,OAAO,EAAErD,GAAG,EAAEA,IAAIsK,EAAEvL,EAAEX,EAAE4B,GAAGR,GAAGT,EAAEwL,QAAQ/G,KAAKpF,EAAEiF,OAAO,CAAC,SAASiH,EAAEvL,EAAEX,EAAEoB,GAAG,MAAMQ,EAAE3B,EAAEc,GAAGf,EAAEW,EAAEsJ,OAAO7E,KAAKxD,EAAE3B,GAAGmB,EAAED,MAAMR,EAAEsJ,OAAO7E,KAAKrE,GAAG,EAAE,CAAC,SAASqL,EAAEzL,GAAG,cAAcA,GAAG,IAAI,SAAS,MAAM,sBAAsB,IAAI,SAAS,MAAM,sBAAsB,QAAQ,MAAM,UAAU,CAAC,SAAS0L,EAAErM,GAAG,IAAIA,EAAE,MAAM,IAAIW,IAAE,sBAAsB,yBAAyB,GAAG,YAAYX,EAAE2L,MAAM,sBAAsB3L,EAAE2L,KAAK,MAAM,IAAIhL,IAAE,2CAA2C,+CAA+C,CAACqF,KAAKhG,IAAI,MAAMsM,IAAIlL,GAAGpB,EAAE,IAAIoB,EAAE,OAAO,MAAMQ,EAAE,iBAAiBR,EAAEA,EAAE,SAASA,EAAEuK,KAAKvK,EAAEmL,WAAW3L,KAAK,SAASQ,EAAEuK,KAAKvK,EAAEmL,WAAWC,KAAK,KAAKvM,EAAE,IAAIwM,OAAO,oBAAoB,KAAK,IAAI7K,IAAI3B,EAAEyM,KAAK9K,GAAG,MAAM,IAAIjB,IAAE,gCAAgC,mCAAmC,CAAC2L,IAAIlL,GAAG,CAAC,SAASuL,EAAEhM,EAAEX,EAAE,CAAC,GAAE,MAAC,MAAMoB,EAAE,GAAGL,EAAE,IAAI6I,IAAIpH,EAAE,IAAIoH,IAAI,IAAI5I,EAAE4B,GAAE,EAAGnB,EAAE,KAAKvB,GAAE,GAAIgB,aAAaJ,EAAE,MAAMd,EAAE6C,GAAE,EAAG,IAAI,MAAM5C,KAAKyB,EAAEf,GAAG,CAAC,MAAMa,SAASb,EAAE4L,WAAWvM,EAAE4M,GAAGlL,GAAGzB,EAAE,KAAIU,IAAIG,IAAIA,EAAES,EAAEZ,EAAEgL,OAAOpK,EAAEZ,EAAEgL,QAAQ7K,MAAQ8B,IAAGA,EAAEf,EAAEP,EAAEX,KAAOT,IAAIA,EAAE,MAAMwB,EAAExB,IAAIc,SAASU,EAAED,EAAEoL,OAAOC,KAAK9M,GAAG+I,QAAQpI,GAAGX,EAAEW,KAAKe,MAAMxB,GAAG,MAAMwB,IAAID,EAAEwD,OAAO,EAAExD,EAAEA,EAAEsH,QAAQpI,GAAGX,EAAEW,KAAKe,IAAI,IAAID,EAAEwD,SAASxD,EAAEzB,EAAEyB,EAAE,MAAMC,EAAED,EAAE,MAAMoB,GAAG7C,GAAE,CAAC,IAAIW,GAAE,EAAG,IAAI,MAAMV,KAAKD,EAAE,CAAC,GAAGe,EAAE2H,IAAIzI,GAAG,SAAS,MAAMsB,EAAEvB,EAAEC,GAAG,GAAG,MAAMsB,EAAE,CAACZ,GAAE,EAAG6B,EAAE4H,IAAInK,GAAG,QAAQ,CAAC,MAAMyB,EAAE0K,EAAE7K,GAAG,YAAYG,GAAGc,EAAE2G,OAAOlJ,GAAGc,EAAEqJ,IAAInK,GAAGmB,EAAEgE,KAAK,CAACxE,KAAKgB,YAAE3B,GAAG8M,MAAM9M,EAAE0L,KAAKjK,KAAKc,EAAE4H,IAAInK,EAAE,CAAC4C,EAAElC,CAAC,CAAE,CAAC,MAAMgB,EAAEC,YAAE,KAAK,OAAJ,EAAGH,QAAC,EAAD,EAAGwD,SAAQxD,EAAE,IAAI,MAAM,GAAGE,EAAE,IAAI,MAAMC,KAAKR,EAAE,GAAGQ,EAAEhB,OAAOe,GAAG1B,YAAE2B,GAAG,CAACA,EAAE+J,KAAK,mBAAmB,KAAK,CAAC,MAAM,CAACvJ,OAAOhB,EAAEF,aAAaJ,EAAEK,KAAKyB,EAAEoK,kBAAkBrL,EAAEsL,kBAAkBjM,EAAEkM,cAActE,MAAMiC,KAAKrI,GAAG,CAAC,SAAS2K,EAAExM,EAAEX,GAAG,OAAO4I,MAAMiC,KAA1/F,UAAWlK,EAAEiB,EAAE,CAAC,GAAG,MAAMV,aAAajB,EAAEF,cAAcgB,GAAGa,EAAE,IAAI,MAAMF,KAAKf,EAAE,OAAC,MAAMa,SAASb,EAAE4L,WAAWjL,EAAEsL,GAAGpK,GAAGd,EAAE,GAAGf,GAAGY,EAAEZ,EAAEgL,QAAQ1L,EAAE,SAAS,MAAM4B,EAAEP,GAAG,CAAC,EAAE,IAAIN,EAAM,OAAL,EAACa,EAAEd,IAAE,EAAE,KAAKA,GAAG,MAAMyB,IAAIX,EAAEd,KAAKc,EAAEd,GAAGC,EAAEwB,GAAG,MAAMI,EAAE,IAAI5C,IAAEW,EAAEG,EAAE,IAAIM,IAAET,EAAEiB,GAAG,KAAKC,EAAE,KAAKb,SAAS4B,CAAC,CAAC,CAA8vFJ,CAAEd,EAAEf,GAAGX,GAAG,C,oCCJh4H,qMAIuS,MAAMwC,EAAE/C,cAAcC,KAAK8M,KAAK,KAAK9M,KAAK0N,YAAY,IAAI,EAAE,MAAM9L,EAAE7B,YAAYkB,GAAGjB,KAAKmE,MAAM,IAAIrB,EAAE9C,KAAK2N,SAAS,KAAK3N,KAAKsC,SAAS,KAAKtC,KAAK4N,SAAQ,EAAG5N,KAAK6N,SAAS,KAAK7N,KAAKmE,MAAMuJ,YAAYzM,CAAC,EAAE,SAASK,EAAEL,GAAG,OAAO,IAAIW,EAAEX,EAAE,CAAC,MAAMe,EAAEjC,YAAYkB,GAAGjB,KAAK2N,SAAS,KAAK3N,KAAK4N,SAAQ,EAAG5N,KAAKsC,SAAStC,KAAK6N,SAAS5M,CAAC,EAAE,SAASkB,EAAElB,GAAG,OAAO,IAAIe,EAAEf,EAAE,CAAC,MAAMT,EAAE,IAAI0J,IAAI,SAAS/G,EAAElC,EAAEX,EAAEC,EAAEsB,GAAE,EAAGK,GAAG1B,EAAEyD,QAAQ,IAAI,MAAMnB,KAAKvC,EAAE,CAAC,MAAMqB,EAAEX,EAAEyI,IAAI5G,GAAG,IAAIlB,EAAE,SAAS,MAAMI,EAAEzB,EAAEuC,GAAGX,EAAEJ,EAAEH,EAAEI,GAAG,GAAGG,IAAIH,GAAGE,GAAGA,EAAEwD,KAAK,CAACxE,KAAK,qBAAqB4M,QAAQ,wDAAwDC,QAAQ,CAACC,MAAMpM,EAAEqM,cAAcjM,EAAEkM,eAAe/L,KAAK3B,EAAEkK,IAAI9I,EAAEV,MAAMU,IAAIC,GAAGD,EAAEuM,UAAU,CAAC,MAAMlN,EAAES,YAAEE,EAAEO,GAAG,GAAGlB,EAAE,OAAOK,EAAED,YAAEJ,EAAEW,EAAEO,IAAI7B,EAAEsB,EAAEV,MAAMiB,CAAC,CAAC,CAAC,IAAI,MAAMT,KAAsB,OAArB,EAAK,MAADT,OAAC,EAADA,EAAGmN,gBAAc,EAAE,GAAE,OAAC,IAAI5N,EAAEwI,IAAItH,EAAER,MAAM,OAAOI,EAAG,2BAA0BI,EAAER,QAAS,QAAO,IAAI,CAAC,SAASa,EAAEd,EAAEX,GAAG,IAAIoB,EAAEpB,EAAE,MAAM,iBAAiBA,GAAGC,YAAEU,GAAGS,EAAE2M,WAAW/N,GAAG,MAAMA,GAAGuB,YAAEZ,IAAI,iBAAiBX,IAAIoB,EAAE4M,OAAOhO,IAAI4B,YAAER,EAAE,CAAC,IAAIO,EAAE,SAASb,EAAEM,EAAEL,GAAG,IAAIK,IAAIpB,YAAEe,GAAG,OAAOK,EAAE,GAAG,UAAUA,GAAG,UAAUA,EAAE,CAAC,GAAGT,YAAEgB,GAAG,MAAM,IAAIsM,UAAU,8BAA8B,OAAOtM,EAAEuM,SAASnN,EAAEK,EAAE,CAAC,OAAOA,CAAC,CAAkGtB,eAAewC,EAAE3B,EAAES,IAAIpB,YAAEW,IAAI,wBAAwBS,GAAG,yBAAyBA,SAAlLtB,iBAAmB,OAAOa,YAAEgB,KAAKA,QAAQ,gCAAsDA,CAAC,CAA2FiB,EAAG,C,oCCAxkD,SAAShB,EAAER,EAAEM,GAAG,GAAGN,GAAGM,EAAE,IAAI,MAAMG,KAAKT,EAAE4D,SAAS,GAAGnD,EAAEsM,aAAazM,EAAE,CAAC,MAAMN,EAAEM,EAAEG,EAAEsM,WAAW,GAAG,mBAAmB/M,EAAE,CAAC,MAAMM,EAAEN,EAAES,GAAGH,GAAGE,EAAEC,EAAEH,EAAE,MAAME,EAAEC,EAAET,EAAE,CAAC,CAAC,SAASA,EAAEQ,EAAEF,GAAG,IAAI,MAAMG,KAAKD,EAAEoD,SAAS,GAAGnD,EAAEsM,aAAazM,EAAE,CAAC,MAAME,EAAEF,EAAEG,EAAEsM,WAAW,mBAAmBvM,QAAQA,EAAEC,SAAST,EAAES,EAAED,EAAE,CAAC,CAJ9R,mE,+UCIA,SAASjB,EAAEA,GAAE,MAAC,OAAW,OAAX,EAA4F,SAAWA,GAAE,YAAC,MAAMS,EAAEG,EAAE6M,KAAKzN,GAAG,GAAK,MAADS,MAAGiN,OAAO,OAAO,KAAK,MAAMrO,EAAEoB,EAAEiN,OAAO/M,GAAGtB,EAAEsO,KAAK1M,GAAG5B,EAAEuO,MAAM,EAAEtO,GAAGD,EAAEwO,IAAI3M,IAAW,OAAT,EAAE7B,EAAEyO,OAAK,EAAE,KAAK1N,IAAa,OAAX,EAAEf,EAAE0O,SAAO,EAAE,KAAKxO,IAAa,OAAX,EAAEF,EAAE2O,SAAO,EAAE,KAAK,GAAG9M,EAAE,GAAG,OAAO,KAAK,GAAGd,EAAE,GAAG,OAAO,KAAK,GAAGb,EAAE,GAAG,OAAO,KAAK,MAAMsC,EAAM,OAAL,EAACxC,EAAE4O,IAAE,EAAE,IAAIlN,EAAEc,GAAGA,EAAEqM,OAAO,EAAE,KAAKC,UAAU,EAAE,GAAG,EAAE,IAAI9N,EAAE,GAAGhB,EAAE+O,MAAM/N,EAAEgO,KAAKC,IAAI3N,EAAEM,EAAE3B,EAAE4B,EAAEd,EAAEb,EAAEwB,QAAQ,GAAG1B,EAAEkP,WAAW,CAAC,MAAMvO,GAAGX,EAAEmP,YAAY/N,GAAGpB,EAAEoP,cAAcpO,EAAE,KAAK,MAAMhB,EAAEkP,YAAY,EAAE,IAAI,GAAGvO,EAAES,GAAG4N,KAAKC,IAAI3N,EAAEM,EAAE3B,EAAE4B,EAAEd,EAAEb,EAAEwB,EAAE,MAAMV,EAAE,IAAIgO,KAAK1N,EAAEM,EAAE3B,EAAE4B,EAAEd,EAAEb,EAAEwB,GAAG2N,UAAU,OAAOC,OAAOC,MAAMvO,GAAG,KAAKA,CAAC,CAAhmBhB,CAAEW,IAAE,EAAO,SAAWA,GAAG,MAAMS,EAAE,IAAI4N,KAAKrO,GAAG0O,UAAU,OAAOC,OAAOC,MAAMnO,GAAG,KAAKA,CAAC,CAA9EA,CAAET,EAAE,CAAulB,MAAMY,EAAE,uN,uCCA+Q,MAAMwK,EAAE,aAAa5G,EAAE,QAAQqK,EAAE,kBAAkBhQ,EAAE,sCAAsCiQ,EAAE,0BAA0BxD,EAAE,mCAA6IH,EAAE,kCAAkCI,EAAE,+BAA+BwD,EAAE,0CAA0CC,EAAE,oCAAoC7P,eAAe8P,EAAE5P,EAAEC,GAAG,MAAMmB,EAA+J,SAAWT,GAAG,MAAMX,EAAE6P,EAAGlP,IAA8qR,SAAYA,GAAE,MAAC,MAAMV,EAAqB,OAApB,EAACU,EAAEmP,wBAAiB,EAAnB,EAAqB/H,aAAa,WAAW,GAAG9H,GAAGA,IAAIkF,EAAE,MAAM,IAAInF,IAAE2P,EAAG,2BAA0B1P,yBAAyBkF,IAAI,EAAj0R4K,CAAG/P,GAAGgQ,EAAGhQ,GAAG,MAAMoB,EAAEpB,EAAE8P,kBAAkB9O,EAAEf,YAAwgD,SAAWU,GAAG,OAAOmF,YAAEnF,EAAE,CAACsP,gBAAgB,CAACC,YAAYvP,IAAI,MAAMX,EAAE,CAACK,SAAS,sBAAsBO,KAAK,GAAGuP,MAAM,GAAG/C,YAAY,GAAGrK,OAAO,KAAKqN,gBAAgB,GAAGC,aAAa,GAAGC,2BAA2B,IAAIrQ,EAAE,IAAI2J,IAAI,CAAC,OAAOxI,EAAET,IAAG,YAAC,MAAMX,EAAEuQ,SAA6D,OAArD,EAAc,OAAd,EAAC5P,EAAE6P,cAAoC,OAAzB,EAAb,EAAeC,MAAM,oBAAyB,OAAR,EAAtC,EAAwCpC,aAA3B,EAAb,EAAgDqC,MAAI,EAAE,GAAG,IAAIpB,OAAOC,MAAMvP,IAAIC,EAAEmK,IAAIpK,EAAE,EAAE,OAAOsC,YAAE3B,EAAE,CAACgQ,KAAKhQ,IAAI,MAAMC,KAAKX,EAAE2Q,OAAOxP,GAAGyP,EAAGlQ,EAAE6P,aAAaxQ,EAAEK,SAAU,GAAEe,KAAKnB,IAAID,EAAEY,KAAKX,EAAED,EAAEoQ,gBAAgBhP,EAAEpB,EAAEqQ,aAAa1P,EAAEmQ,mBAAmB1P,EAAE,EAAE2P,SAASpQ,IAAIX,EAAEoN,YAAYzM,EAAE6P,WAAW,EAAEQ,MAAMrQ,IAAIX,EAAEmQ,MAAMxP,EAAE6P,WAAW,EAAES,iBAAiBtQ,IAAIX,EAAE+C,OAAuI,SAAWpC,GAAG,IAAIX,EAAEC,EAAEmB,EAAEJ,EAAE,IAAI,MAAMY,KAAKjB,EAAEqE,SAAS,OAAOpD,EAAEuM,WAAW,IAAI,eAAenO,EAAEC,GAAG2B,EAAE4O,YAAYU,MAAM,KAAKxQ,KAAKC,GAAG2O,OAAOvB,WAAWpN,KAAK,MAAM,IAAI,eAAeS,EAAEJ,GAAGY,EAAE4O,YAAYU,MAAM,KAAKxQ,KAAKC,GAAG2O,OAAOvB,WAAWpN,KAAK,MAAM,CAACwQ,KAAKnR,EAAEoR,KAAKnR,EAAEoR,KAAKjQ,EAAEkQ,KAAKtQ,EAAEK,iBAAiBwB,IAAE,CAApa0O,CAAE5Q,EAAE,EAAE6Q,WAAWpQ,EAAEqQ,WAAWrQ,EAAEsQ,SAAStQ,EAAEuQ,SAASvQ,IAAIpB,EAAEmQ,QAAQnQ,EAAEmQ,MAAMnQ,EAAEY,MAAMZ,EAAEsQ,2BAA2BlL,QAAQnF,GAAGD,CAAC,IAAI,CAA1tEyE,CAAErD,IAAI,MAAM,CAACwQ,WAAWjF,EAAEvL,GAAOyQ,mBAAe,OAAOjJ,MAAMiC,KAAK7J,IAAI,EAAE8Q,iBAAiB9Q,EAAE,CAAhUmM,QAASxM,kBAAEX,EAAE,CAAC+R,aAAa,OAAOC,MAAM,CAACC,QAAQ,MAAMC,QAAQ,kBAAkBC,QAAQhN,KAAM,MAADlF,OAAC,EAADA,EAAGM,kBAAkBM,OAAQ,MAADZ,OAAC,EAADA,EAAGY,UAAUmF,MAAM,OAAu2C,SAAWrF,EAAEX,GAAGe,YAAEJ,KAAKc,YAAEd,EAAEX,EAAE4R,WAAWQ,oBAAoBC,KAAI,KAAMrS,EAAE4R,WAAWQ,oBAAoBC,IAAI/Q,YAAEtB,EAAE4R,WAAWQ,oBAAoBC,MAAM5Q,YAAEd,EAAEX,EAAE4R,WAAWU,WAAWD,KAAI,KAAMrS,EAAE4R,WAAWU,WAAWD,IAAI/Q,YAAEtB,EAAE4R,WAAWU,WAAWD,MAAM,CAAtlDE,CAAEvS,EAAEoB,GAAGA,CAAC,CAAqK,MAAMgL,EAAE,IAAIxC,IAAI,CAAC,OAAO,mBAAmB,UAAU,sCAAsC,SAAS+C,EAAEhM,GAAG,IAAIV,GAAE,EAAG,MAAMmB,EAAE,CAACoR,gBAAgB,CAACH,IAAI,IAAID,oBAAoB,CAACC,IAAI,IAAIC,WAAW,CAACD,IAAI,GAAGI,aAAa,KAAKC,oBAAmB,IAAK,GAAGpQ,YAAE3B,EAAE,CAACgS,mBAAmB,CAACC,UAAUjS,IAAI,OAAOA,EAAEoH,aAAa,SAAS,IAAI,kBAAkB,MAAM,CAAC8K,IAAI,CAACC,KAAK,CAACC,IAAIpS,IAAIS,EAAEoR,gBAAgBH,IAAI1R,EAAEoH,aAAagE,EAAE,KAAK,IAAI,sBAAsB,MAAM,CAAC8G,IAAI,CAACC,KAAK,CAACC,IAAIpS,IAAIS,EAAEgR,oBAAoBC,IAAI1R,EAAEoH,aAAagE,EAAE,KAAK,IAAI,aAAa,MAAM,CAAC8G,IAAI,CAACC,KAAK,CAACC,IAAIpS,IAAIS,EAAEkR,WAAWD,IAAI1R,EAAEoH,aAAagE,EAAE,IAAIiH,UAAUrS,IAAI,GAAG,iBAAiBA,EAAEoH,aAAa,QAAQ,MAAM,CAACkL,cAAc,CAACC,MAAMvS,IAAI,MAAMX,EAAEW,EAAE6P,YAAYxQ,GAAGoM,EAAE1D,IAAI1I,EAAEmT,iBAAiB/R,EAAEkR,WAAWG,aAAazS,EAAE,GAAG,GAAE,EAAGoT,WAAWzS,IAAI,OAAOA,EAAEoH,aAAa,SAAS,IAAI,cAAc,MAAM,CAACsL,aAAa1S,IAAIV,EAAE,SAASU,EAAE6P,YAAY2C,aAAa,GAAG,IAAI,yBAAyB,MAAM,CAACE,aAAa1S,IAAIS,EAAEkR,WAAWI,mBAAmB,SAAS/R,EAAE6P,YAAY2C,aAAa,GAAE,MAAOlT,EAAE,MAAM,IAAID,IAAhkD,uCAAokD,6DAA6D,GAAGgB,YAAEI,EAAEkR,WAAWG,cAAc,MAAM,IAAIzS,IAA/sD,kCAAmtD,qDAAqD,OAAOoB,CAAC,CAAkvC,SAASkS,EAAE3S,EAAEX,EAAEC,GAAG,OAAOmB,YAAET,GAAGA,GAAGV,EAAEU,EAAEC,OAAOZ,GAAGW,EAAE0P,eAAepQ,EAAEU,EAAEN,WAAWL,GAAGW,EAAEC,OAAOZ,GAAG,CAACF,eAAe4E,EAAE/D,EAAEX,EAAEC,EAAEmB,EAAE,CAAC,GAAE,MAAC,MAAMiB,YAAYrB,EAAE+B,OAAOnB,SAAiX9B,eAAiBa,EAAEV,EAAEmB,EAAEQ,EAAE,CAAC,GAAG,MAAMP,iBAAiBE,EAAE8K,IAAEkH,OAAO3R,EAAEb,EAAEJ,EAAEmR,mBAAmBrQ,EAAExB,EAAEqT,EAAEvS,EAAEd,EAAEmB,GAAGL,EAAEyS,OAAOC,MAAM,GAAGzS,YAAES,GAAG,MAAMxB,EAAE,IAAID,IAAEiM,EAAG,aAAYhM,wCAAwC,IAAID,IAAEyP,EAAE,wBAAwB,IAAInO,EAAE,IAAI0K,IAAE,IAAIvK,EAAEsB,OAAO1B,iBAAiBE,IAAI,IAAIqB,YAAErB,EAAEsB,KAAG,UAAUnB,YAAEmB,IAAEtB,OAAE,EAAOK,GAAGN,EAAEkB,YAAElB,EAAEuB,IAAkD,CAA/C,MAAM,MAAM,IAAI7C,IAAE0P,EAAE,2BAA2B,CAAC,MAAM,CAAC3M,OAAOzB,EAAED,iBAAiBE,EAAEc,YAAYZ,EAAE,CAAtwBkD,CAAEhE,EAAEX,EAAEC,EAAEmB,IAAIgB,OAAOb,EAAEL,aAAaH,EAAE2S,OAAOjS,EAAE1B,cAAcuB,EAAEqS,cAAcjS,SAA4rB5B,eAAiBa,EAAEV,EAAEmB,EAAE,CAAC,GAAE,cAAC,MAAMQ,EAAEb,SAASQ,YAAE,CAACqS,EAAEjT,EAAEiR,WAAWQ,oBAAoBC,IAAIpS,EAAEmB,GAAGH,EAAEN,EAAEV,EAAEmB,KAAK,GAAGQ,EAAEiC,OAAO9C,EAAE8C,MAAM,MAAM,IAAI7D,IAAER,EAAG,gEAA+DS,KAAK,CAAC4D,MAAMjC,EAAEiC,OAAO9C,EAAE8C,QAAQ,MAAMzB,OAAOX,EAAEoS,OAAOvS,GAAU,OAAR,EAACM,EAAE6R,OAAK,EAAE,CAAC,EAAE/R,GAAS,OAAP,EAAAE,EAAE6R,YAAK,EAAP,EAASvS,gBAAqB,OAAT,EAAEH,EAAE0S,YAAK,EAAP,EAASvS,cAAasB,EAAiB,OAAhB,EAAQ,OAAR,EAACzB,EAAE0S,YAAK,EAAP,EAASC,SAAM,EAAK,GAAG1S,YAAEU,GAAG,MAAM,IAAI1B,IAAE8L,EAAG,uDAAsD7L,IAAI,CAACI,SAASJ,EAAEiB,aAAaQ,EAAEU,OAAOX,EAAEoS,OAAOvS,IAAI,MAAM,IAAIwS,EAAG,MAADrS,IAAG,IAAIP,aAAaQ,EAAEgS,OAAOlR,EAAE,CAA/qCuR,CAAEpT,EAAEK,EAAEX,SAASe,GAAG,MAAM,CAACiR,IAAI1R,EAAEiR,WAAWY,gBAAgBH,IAAIzR,KAAKI,EAAEJ,KAAKyP,aAAarP,EAAEqP,aAAajO,OAAOb,EAAEoS,cAAcjS,EAAER,aAAaH,EAAEhB,cAAcuB,EAAED,iBAAmC,OAAnB,EAACD,EAAEC,kBAAgB,EAAEgL,IAAEkH,MAAMxQ,OAAOnB,EAAE8R,OAAOjS,EAAEuS,gBAAgBrT,EAAEJ,iBAAiBa,EAAEb,iBAAiB,CAA65B,SAASuT,EAAEnT,GAAE,MAAC,MAAMX,EAAEW,EAAEsT,MAAMtT,GAAG,aAAaA,EAAEgL,OAAO,IAAI1L,EAAEU,EAAEsT,MAAMtT,GAAG,QAAQA,EAAEgL,OAAO,OAAOhL,EAAEA,EAAEoI,QAAQpI,GAAG,aAAaA,EAAEgL,OAAO1L,IAAIA,EAAE,IAAI0B,IAAE,CAACf,KAAK4O,EAAE7D,KAAK,MAAMoB,MAAMyC,IAAI7O,EAAEuT,QAAQjU,IAAI,CAAC0T,cAAqB,OAAR,EAAE,MAAD3T,OAAC,EAADA,EAAGY,MAAI,EAAE,KAAKb,cAAcE,EAAEW,KAAKwB,OAAOzB,EAAE,CAACb,eAAemB,EAAEjB,EAAEC,EAAEmB,EAAE,CAAC,GAAE,MAAC,IAAIJ,EAAEY,GAAE,EAAG,MAAML,EAAER,SAASoT,QAAQvP,IAAI,CAACwP,EAAEpU,EAAE4R,WAAWU,WAAWD,IAAIpS,EAAED,EAAE4R,WAAWU,WAAWG,aAAa,IAAIrR,EAAEiT,MAAM,IAAI1T,kBAAEX,EAAE4R,WAAWU,WAAWD,IAAI,CAACN,aAAa,OAAOC,MAAMsC,EAAErU,OAAE,EAAO,IAAImB,EAAEiT,MAAM,IAAIxT,OAAQ,MAADO,OAAC,EAADA,EAAGP,WAAWY,EAAE,sBAAsBF,EAAEoK,OAAmB,OAAf,EAAEpK,EAAEqK,SAAS,SAAE,EAAb,EAAepK,UAAS,GAAGC,EAAE,CAAC,IAAId,EAAE,OAAOK,EAAEa,IAAEwE,SAASnG,YAAEuB,EAAEkK,OAAOlK,EAAEkK,MAAM,IAAI,QAAQhL,EAAEc,EAAEoK,YAAY,MAAM,IAAI,aAAa,IAAI,aAAalL,EAAEc,EAAEoK,YAAY,GAAG,MAAM,IAAI,kBAAkB,IAAI,UAAUlL,EAAEc,EAAEoK,YAAY,GAAG,GAAG,MAAM,IAAI,eAAelL,EAAEc,EAAEoK,YAAY,GAAG,GAAG,GAAG,MAAM7L,EAAE,uDAAuDoO,KAAKrN,EAAEiF,MAAM,GAAGhG,EAAE,CAAC,MAAMC,EAAEU,EAAE,GAAG4T,QAAQ,GAAGnT,EAAET,EAAE,GAAG4T,QAAQ,GAAGvT,EAAE+M,WAAW/N,EAAE,IAAIuU,QAAQ,GAAGtU,IAAI8N,WAAW/N,EAAE,IAAIuU,QAAQ,IAAInT,IAAIJ,IAAIY,GAAE,EAAG,CAAC,CAAC,MAAM,CAACV,aAAaF,EAAE0S,OAAO9R,EAAE,CAAC9B,eAAe8T,EAAE5T,EAAEC,EAAEmB,GAAG,OAAqK,SAAWT,EAAEV,GAAG,MAAMW,KAAKI,GAAG6P,EAAGlQ,GAAGY,EAAEsO,EAAG5P,GAAG+P,EAAGzO,GAAG,MAAMR,EAAEK,YAAE0E,YAAEvE,EAAEuO,kBAAkB,CAAC0E,QAAQ7T,IAAC,CAAIC,KAAKD,EAAEoH,aAAa,QAAQ1H,SAASwQ,EAAGlQ,EAAEoH,aAAa,SAASnH,UAAU,EAAEA,KAAKD,KAAKA,IAAIK,IAAI,GAAGY,YAAEb,GAAG,CAAC,MAAMJ,EAAES,YAAE0E,YAAEvE,EAAEuO,kBAAkB,CAAC2E,YAAY9T,GAAGA,KAAKA,GAAGA,EAAEoH,aAAa,UAAUhH,EAAEV,WAAW,GAAGuB,YAAEjB,GAAG,OAAuJ,SAAWA,GAAE,QAAC,MAAMV,EAAE,GAAGmB,EAAE,GAAG,IAAIJ,EAAE,MAAMY,EAAEkE,YAAEnF,EAAE,CAAC+T,eAAe,CAACC,UAAU,CAACC,SAAS,CAACJ,QAAQ7T,GAAGA,OAAO,IAAI,MAAMY,KAAKK,EAAE,CAAC,MAAMA,EAAEL,EAAEwG,aAAa,QAAQ,IAAInG,EAAE,SAAS,IAAIb,EAAEU,EAAE,GAAGF,EAAEsT,aAAa,QAAQ9T,EAAE8P,EAAGtP,EAAEwG,aAAa,SAASnH,KAAK0B,YAAEf,EAAE,CAACuT,WAAW,CAACC,YAAYpU,IAAII,EAAE8P,EAAGlQ,EAAEoH,aAAa,SAASnH,KAAK,CAACoU,UAAUrU,IAAIc,GAAGd,EAAEoH,aAAa,QAAQ,QAAQhH,EAAE,SAAS,MAAMO,EAAE,SAASC,EAAEwG,aAAa,YAAY,IAAIrG,GAAE,EAAG,OAAOX,EAAEoS,eAAe,IAAI,UAAU,IAAI,qBAAqB,IAAI,kBAAkB,IAAI,OAAO,IAAI,MAAM,IAAI,QAAQ,IAAI,OAAO,IAAI,qBAAqB,IAAI,eAAe,IAAI,cAAc,IAAI,gBAAgB,IAAI,eAAe,IAAI,kBAAkB/R,EAAEgE,KAAK,IAAIzD,IAAE,CAACf,KAAKgB,EAAEmL,MAAMnL,EAAE+J,KAAK,UAAUsJ,SAAS3T,KAAK,MAAM,IAAI,QAAQ,IAAI,SAAS,IAAI,UAAUF,EAAEgE,KAAK,IAAIzD,IAAE,CAACf,KAAKgB,EAAEmL,MAAMnL,EAAE+J,KAAK,SAASsJ,SAAS3T,KAAK,MAAM,IAAI,UAAU,IAAI,SAAS,IAAI,aAAa,IAAI,QAAQ,IAAI,YAAY,IAAI,OAAO,IAAI,SAAS,IAAI,SAAS,IAAI,QAAQ,IAAI,WAAW,IAAI,mBAAmB,IAAI,QAAQ,IAAI,WAAW,IAAI,SAAS,IAAI,WAAW,IAAI,UAAU,IAAI,WAAW,IAAI,OAAO,IAAI,SAAS,IAAI,KAAK,IAAI,QAAQ,IAAI,SAAS,IAAI,WAAW,IAAI,OAAOF,EAAEgE,KAAK,IAAIzD,IAAE,CAACf,KAAKgB,EAAEmL,MAAMnL,EAAE+J,KAAK,SAASsJ,SAAS3T,EAAE2D,OAAQ,OAAF,EAACxD,GAAC,EAAE,OAAO,MAAM,IAAI,WAAW,IAAI,OAAOL,EAAEgE,KAAK,IAAIzD,IAAE,CAACf,KAAKgB,EAAEmL,MAAMnL,EAAE+J,KAAK,OAAOsJ,SAAS3T,EAAE2D,OAAQ,OAAF,EAACxD,GAAC,EAAE,MAAM,MAAM,IAAI,oBAAoBT,EAAE,QAAQU,GAAE,EAAG,MAAM,IAAI,yBAAyBV,EAAE,aAAaU,GAAE,EAAG,MAAM,IAAI,oBAAoB,IAAI,yBAAyB,IAAI,8BAA8BV,EAAE,WAAWU,GAAE,EAAG,MAAM,IAAI,sBAAsB,IAAI,2BAA2B,IAAI,2BAA2BV,EAAE,UAAUU,GAAE,EAAG,MAAM,IAAI,uBAAuB,IAAI,4BAA4BA,GAAE,EAAGzB,EAAEmF,KAAK,IAAIpF,IAAE8L,EAAG,kBAAiB/K,sBAAsB,CAAC4K,MAAM,IAAIuJ,eAAeC,kBAAkBxU,MAAM,MAAM,QAAQV,EAAEmF,KAAK,IAAIpF,IAAEkM,EAAG,uBAAsBnL,KAAK,CAAC4K,MAAM,IAAIuJ,eAAeC,kBAAkBxU,MAAMe,GAAGN,EAAEgE,KAAK,IAAIzD,IAAE,CAACf,KAAKgB,EAAEmL,MAAMnL,EAAE+J,KAAK,WAAWsJ,SAAS3T,IAAI,CAAC,IAAI,MAAMtB,KAAKoB,EAAE,GAAG,YAAYpB,EAAE2L,OAAO3L,EAAEiV,UAAUG,EAAE1M,IAAI1I,EAAEY,KAAKuS,eAAe,CAACnT,EAAE2L,KAAK,MAAM,KAAK,CAAC,MAAM,CAACzK,aAAaF,EAAEoB,OAAOhB,EAAEyS,OAAO5T,EAAE,CAA3uEyH,CAAE/G,EAAE,CAAC,MAAM,IAAIX,IAAEiM,EAAG,SAAQtL,2BAA2B,CAAC0U,UAAU,IAAIH,eAAeC,kBAAkB5T,IAAI,CAA7jB+T,CAAErV,SAASU,kBAAEX,EAAE,CAAC+R,aAAa,OAAOC,MAAM,CAACC,QAAQ,MAAMC,QAAQ,sBAAsBC,QAAQhN,EAAEoQ,SAAStV,KAAM,MAADmB,OAAC,EAADA,EAAGb,kBAAkBM,OAAQ,MAADO,OAAC,EAADA,EAAGP,UAAUmF,KAAK,CAAia,MAAMoP,EAAE,IAAIxL,IAAI,CAAC,WAAW,QAAomE9J,eAAesU,EAAEnU,EAAEmB,EAAEJ,EAAEY,GAAG,IAAIoE,KAAKzE,SAASZ,kBAAEV,EAAE,CAAC8R,aAAa,OAAOC,MAAMsC,EAAElT,EAAEJ,EAAEY,GAAGf,OAAQ,MAADe,OAAC,EAADA,EAAGf,SAASU,EAAEA,EAAEiU,QAAQ,yBAAyB,cAAc,IAAG,MAAC,GAAI,MAAD5T,GAAa,OAAZ,EAADA,EAAGpB,aAAH,EAAeyE,OAAO,CAAC,MAAMtE,EAAE,IAAIiJ,IAAIhI,EAAEpB,YAAY,OAAOiV,KAAKC,MAAMnU,GAAG,CAACvB,EAAEC,IAAIU,EAAE+H,IAAI1I,GAAGc,EAAEb,GAAGA,GAAG,CAAC,OAAOwV,KAAKC,MAAMnU,EAAkF,CAA/E,MAAMR,GAAG,MAAM,IAAIf,IAA13Q,2BAA83Q,sCAAmC,CAAC2V,SAASpU,EAAEsC,MAAM9C,GAAG,CAAC,CAAC,SAASuT,EAAE3T,EAAEX,EAAEC,GAAG,MAAM,CAACgS,QAAQ,MAAMC,QAAQ,aAAaC,QAAQhN,EAAEyQ,UAAUjV,EAAEkV,aAAa7V,EAAE8V,QAAQ,YAAYC,WAAY,MAAD9V,OAAC,EAADA,EAAG+V,WAAWC,MAAO,MAADhW,OAAC,EAADA,EAAGoU,SAAU,MAADpU,OAAC,EAADA,EAAGM,iBAAiB,CAAuT,SAASsP,EAAGlP,GAAG,OAAO,IAAIuV,WAAWC,gBAAgBxV,EAAEyV,OAAO,WAAW,CAAC,SAASvF,EAAGlQ,GAAG,MAAMX,EAAEC,GAAGU,EAAEuQ,MAAM,KAAK,MAAM,CAACN,OAAO3Q,EAAED,EAAE,GAAGY,KAAM,MAADX,IAAGD,EAAE,CAAwJ,SAASgQ,EAAGrP,GAAG,IAAIV,EAAE,GAAGmB,EAAE,GAAG,GAAGkB,YAAE3B,EAAEmP,kBAAkB,CAACuG,UAAU1V,IAAIV,EAAEU,EAAEoH,aAAa,iBAAiB,CAACuO,cAAc3V,IAAIS,EAAET,EAAE6P,WAAW,MAAMvQ,EAAE,MAAM,IAAID,IAAG,aAAYC,IAAImB,EAAE,C","file":"static/js/62.65b84be3.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isSome as s,unwrap as a}from\"../../../core/maybe.js\";import{throwIfAborted as i,isAbortError as o}from\"../../../core/promiseUtils.js\";import{equals as n,WGS84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as p,convertToGeometry as h}from\"../featureConversionUtils.js\";import y from\"../data/FeatureStore.js\";import{project as c,checkProjectionSupport as m}from\"../data/projectionSupport.js\";import{QueryEngine as l}from\"../data/QueryEngine.js\";import{validateGeoJSON as g,createOptimizedFeatures as _}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getFeature as d}from\"../../ogc/wfsUtils.js\";import w from\"../../support/FieldsIndex.js\";class E{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await d(this._getFeatureUrl??\"\",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await g(r),i(e);const a=_(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!n(this._queryEngine.spatialReference,u))for(const i of a)s(i.geometry)&&(i.geometry=p(c(h(i.geometry,this._queryEngine.geometryType,!1,!1),u,this._queryEngine.spatialReference)));let o=1;for(const s of a){const e={};f(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=o++)}return a}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:s,spatialReference:o,fields:n,geometryType:u,featureType:p,objectIdField:h,customParameters:c}=e;this._featureType=p,this._customParameters=c,this._getFeatureUrl=r,this._getFeatureOutputFormat=s,this._fieldsIndex=new w(n),await this._checkProjection(o),i(t),this._queryEngine=new l({fields:n,geometryType:u,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:o,timeInfo:null,featureStore:new y({geometryType:u,hasM:!1,hasZ:!1})});const m=await this._snapshotFeatures(a(t.signal));return this._queryEngine.featureStore.addMany(m),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new t(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=e(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),o(e)||r.getLogger(\"esri.layers.WFSLayer\").error(new t(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:e}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await m(u,e)}catch{throw new t(\"unsupported-projection\",\"Projection not supported\",{spatialReference:e})}}}export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this._compareMinX=l,this._compareMinY=c,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),g.prune(),M.prune(),X.prune(),Y.prune()}all(t){this._all(this._data,t)}search(t,i){let n=this._data;const e=this._toBBox;if(f(t,n))for(g.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;f(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):g.push(h))}n=g.pop()}}collides(t){let i=this._data;const n=this._toBBox;if(!f(t,i))return!1;for(g.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(f(t,h)){if(i.leaf||x(t,h))return!0;g.push(s)}}i=g.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){const t=this._data;this._data=i,i=t}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new b([]),this}remove(i){if(!i)return this;let e,s=this._data,h=null,a=0,r=!1;const o=this._toBBox(i);for(X.clear(),Y.clear();s||X.length>0;){if(s||(s=n(X.pop()),h=X.data[X.length-1],a=Y.pop()??0,r=!0),s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),X.push(s),this._condense(X),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(X.push(s),Y.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,i){let n=t;for(M.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else M.pushArray(n.children);n=M.pop()??null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));p(t,i,n,l,this._compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);p(t,a,i,o,this._compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=u(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);X.clear();const h=this._chooseSubtree(s,this._data,i,X);for(h.children.push(t),o(h,s);i>=0&&X.data[i].children.length>this._maxEntries;)this._split(X,i),i--;this._adjustParentBBoxes(s,X,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this._toBBox),a(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this._data=new j([t,i]),this._data.height=t.height+1,a(this._data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this._toBBox),o=r(t,a,n,this._toBBox),l=_(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this._compareMinX:l,s=t.leaf?this._compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=d(h)+d(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=d(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=d(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this._toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this._compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this._compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this._toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function _(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const g=new e,M=new e,X=new e,Y=new e({deallocator:void 0});class B{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends B{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{B as BBox,h as PooledRBush};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../core/maybe.js\";import{getCentroidOptimizedGeometry as e}from\"../centroid.js\";import{OptimizedFeature as r}from\"../OptimizedFeature.js\";import o from\"../OptimizedGeometry.js\";const i={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new r(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(r,i)=>(t(r.centroid)&&(r.centroid=e(new o,r.geometry,i.hasZ,i.hasM)),r.centroid)};export{i as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import{PooledRBush as i}from\"../../../core/libs/rbush/PooledRBush.js\";import{empty as s}from\"../../../geometry/support/aaBoundingRect.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i){n.minX=i[0],n.minY=i[1],n.maxX=i[2],n.maxY=i[3]}function e(i,s,d){t(s),i.search(n,d)}class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i(9,has(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=s();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),e(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{o as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}toArray(){return Array.from(this._featuresById.values())}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const n=this._featuresById.get(i);let h;if(this._markedIds.add(i),n?(t.displayId=n.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=a(s(h)?h:d(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{OptimizedFeature as t}from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{normalizeFieldName as o,isNumericField as r}from\"../../../support/fieldUtils.js\";const i={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function s(e){return i[e]}function*c(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*u(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*l(e,o={}){const{geometryType:r,objectIdField:i}=o;for(const c of e){const{geometry:e,properties:u,id:l}=c;if(e&&s(e.type)!==r)continue;const f=u||{};let a=f[i]??null;i&&null!=l&&!f[i]&&(f[i]=a=l);const y=new t(e?g(new n,e,o):null,f,null,a);yield y}}function f(e){for(const t of e)if(t.length>2)return!0;return!1}function a(e){return!p(e)}function y(e){return p(e)}function p(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function d(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function g(e,t,n){switch(t.type){case\"LineString\":return m(e,t,n);case\"MultiLineString\":return h(e,t,n);case\"MultiPoint\":return w(e,t,n);case\"MultiPolygon\":return P(e,t,n);case\"Point\":return b(e,t,n);case\"Polygon\":return j(e,t,n)}}function m(e,t,n){return G(e,t.coordinates,n),e}function h(e,t,n){for(const o of t.coordinates)G(e,o,n);return e}function w(e,t,n){return G(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates){S(e,o[0],n);for(let t=1;t<o.length;t++)F(e,o[t],n)}return e}function b(e,t,n){return k(e,t.coordinates,n),e}function j(e,t,n){const o=t.coordinates;S(e,o[0],n);for(let r=1;r<o.length;r++)F(e,o[r],n);return e}function S(e,t,n){const o=d(t);a(o)?M(e,o,n):G(e,o,n)}function F(e,t,n){const o=d(t);y(o)?M(e,o,n):G(e,o,n)}function G(e,t,n){for(const o of t)k(e,o,n);e.lengths.push(t.length)}function M(e,t,n){for(let o=t.length-1;o>=0;o--)k(e,t[o],n);e.lengths.push(t.length)}function k(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function O(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function T(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function L(e,t={}){const n=[],i=new Set,l=new Set;let a,y=!1,p=null,d=!1,{geometryType:g=null}=t,m=!1;for(const r of c(e)){const{geometry:e,properties:t,id:c}=r;if(!e||(g||(g=s(e.type)),s(e.type)===g)){if(!y){y=f(u(e))}if(d||(d=null!=c,d&&(a=typeof c,p=Object.keys(t).filter((e=>t[e]===c)))),d&&null!=c&&(p.length>1?p=p.filter((e=>t[e]===c)):1===p.length&&(p=t[p[0]]===c?p:[])),!m&&t){let e=!0;for(const r in t){if(i.has(r))continue;const s=t[r];if(null==s){e=!1,l.add(r);continue}const c=O(s);\"unknown\"!==c?(l.delete(r),i.add(r),n.push({name:o(r),alias:r,type:c})):l.add(r)}m=e}}}const h=o(1===p?.length&&p[0]||null);if(h)for(const o of n)if(o.name===h&&r(o)){o.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:y,objectIdFieldName:h,objectIdFieldType:a,unknownFields:Array.from(l)}}function I(e,t){return Array.from(l(c(e),t))}export{I as createOptimizedFeatures,s as getGeometryType,L as inferLayerProperties,T as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s,sanitizeNullFieldValue as o}from\"../../../support/fieldUtils.js\";class l{constructor(){this.code=null,this.description=null}}class u{constructor(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new u(e)}class c{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function f(e){return new c(e)}const d=new Set;function m(e,t,r,s=!1,o){d.clear();for(const l in r){const u=e.get(l);if(!u)continue;const c=r[l],f=p(u,c);if(f!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:u,originalValue:c,sanitizedValue:f}}),d.add(u.name),u&&(s||u.editable)){const e=n(u,f);if(e)return a(i(e,u,f));t[u.name]=f}}for(const n of e?.requiredFields??[])if(!d.has(n.name))return a(`missing required field \"${n.name}\"`);return null}function p(e,t){let n=t;return\"string\"==typeof t&&r(e)?n=parseFloat(t):null!=t&&s(e)&&\"string\"!=typeof t&&(n=String(t)),o(n)}let h;function g(n,i){if(!n||!t(i))return n;if(\"rings\"in n||\"paths\"in n){if(e(h))throw new TypeError(\"geometry engine not loaded\");return h.simplify(i,n)}return n}async function y(){return e(h)&&(h=await import(\"../../../../geometry/geometryEngineJSON.js\")),h}async function w(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await y()}export{a as createFeatureEditErrorResult,f as createFeatureEditSuccessResult,w as loadGeometryEngineForSimplify,m as mixAttributes,g as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction o(n,c){if(n&&c)for(const f of n.children)if(f.localName in c){const n=c[f.localName];if(\"function\"==typeof n){const c=n(f);c&&o(f,c)}else o(f,n)}}function*n(o,c){for(const f of o.children)if(f.localName in c){const o=c[f.localName];\"function\"==typeof o?yield o(f):yield*n(f,o)}}export{n as iterateXML,o as visitXML};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e)??n(e)}function n(e){const n=new Date(e).getTime();return Number.isNaN(n)?null:n}function t(e){const n=s.exec(e);if(!n?.groups)return null;const t=n.groups,u=+t.year,o=+t.month-1,r=+t.day,f=+(t.hours??\"0\"),i=+(t.minutes??\"0\"),d=+(t.seconds??\"0\");if(f>23)return null;if(i>59)return null;if(d>59)return null;const l=t.ms??\"0\",c=l?+l.padEnd(3,\"0\").substring(0,3):0;let a;if(t.isUTC)a=Date.UTC(u,o,r,f,i,d,c);else if(t.offsetSign){const e=+t.offsetHours,n=+t.offsetMinutes;a=6e4*(\"+\"===t.offsetSign?-1:1)*(60*e+n)+Date.UTC(u,o,r,f,i,d,c)}else a=new Date(u,o,r,f,i,d,c).getTime();return Number.isNaN(a)?null:a}const s=/^(?:(?<year>-?\\d{4,})-(?<month>\\d{2})-(?<day>\\d{2}))(?:T(?<hours>\\d{2}):(?<minutes>\\d{2}):(?<seconds>\\d{2})(?:\\.(?<ms>\\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\\+|-)(?<offsetHours>\\d{2}):(?<offsetMinutes>\\d{2})))?$/;export{e as parseDate,n as parseJSDate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import t from\"../../core/Error.js\";import{cache as r,find as n}from\"../../core/iteratorUtils.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{eachAlways as s}from\"../../core/promiseUtils.js\";import{isHTTPSProtocol as i,hasSameOrigin as p,toHTTPS as u}from\"../../core/urlUtils.js\";import{initializeProjection as c,project as l}from\"../../geometry/projection.js\";import{WGS84 as m,equals as y}from\"../../geometry/support/spatialReferenceUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import{getGeometryType as d}from\"../graphics/sources/geojson/geojson.js\";import{parseDate as g}from\"./dateUtils.js\";import{visitXML as w,iterateXML as b}from\"./xmlUtils.js\";import h from\"../support/Field.js\";import T from\"../../geometry/SpatialReference.js\";import F from\"../../geometry/Extent.js\";const S=\"xlink:href\",x=\"2.0.0\",C=\"__esri_wfs_id__\",E=\"wfs-layer:getWFSLayerTypeInfo-error\",N=\"wfs-layer:empty-service\",P=\"wfs-layer:feature-type-not-found\",R=\"wfs-layer:geojson-not-supported\",j=\"wfs-layer:kvp-encoding-not-supported\",A=\"wfs-layer:malformed-json\",G=\"wfs-layer:unknown-geometry-type\",k=\"wfs-layer:unknown-field-type\",v=\"wfs-layer:unsupported-spatial-reference\",U=\"wfs-layer:unsupported-wfs-version\";async function D(t,r){const n=I((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetCapabilities\",VERSION:x,...r?.customParameters},signal:r?.signal})).data);return $(t,n),n}function I(e){const t=te(e);ne(t),ae(t);const n=t.firstElementChild,a=r(M(n));return{operations:L(n),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}const O=new Set([\"json\",\"application/json\",\"geojson\",\"application/json; subtype=geojson\"]);function L(e){let r=!1;const n={GetCapabilities:{url:\"\"},DescribeFeatureType:{url:\"\"},GetFeature:{url:\"\",outputFormat:null,supportsPagination:!1}};if(w(e,{OperationsMetadata:{Operation:e=>{switch(e.getAttribute(\"name\")){case\"GetCapabilities\":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(S)}}}};case\"DescribeFeatureType\":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(S)}}}};case\"GetFeature\":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(S)}}},Parameter:e=>{if(\"outputFormat\"===e.getAttribute(\"name\"))return{AllowedValues:{Value:e=>{const t=e.textContent;t&&O.has(t.toLowerCase())&&(n.GetFeature.outputFormat=t)}}}}}}},Constraint:e=>{switch(e.getAttribute(\"name\")){case\"KVPEncoding\":return{DefaultValue:e=>{r=\"true\"===e.textContent.toLowerCase()}};case\"ImplementsResultPaging\":return{DefaultValue:e=>{n.GetFeature.supportsPagination=\"true\"===e.textContent.toLowerCase()}}}}}}),!r)throw new t(j,\"WFS service doesn't support key/value pair (KVP) encoding\");if(a(n.GetFeature.outputFormat))throw new t(R,\"WFS service doesn't support GeoJSON output format\");return n}function $(e,t){i(e)&&(p(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=u(t.operations.DescribeFeatureType.url)),p(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=u(t.operations.GetFeature.url)))}function M(e){return b(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:\"undefined:undefined\",name:\"\",title:\"\",description:\"\",extent:null,namespacePrefix:\"\",namespaceUri:\"\",supportedSpatialReferences:[]},r=new Set([4326]),n=e=>{const t=parseInt(e.textContent?.match(/(?<wkid>\\d+$)/i)?.groups?.wkid??\"\",10);Number.isNaN(t)||r.add(t)};return w(e,{Name:e=>{const{name:r,prefix:n}=re(e.textContent);t.typeName=`${n}:${r}`,t.name=r,t.namespacePrefix=n,t.namespaceUri=e.lookupNamespaceURI(n)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=V(e)},DefaultSRS:n,DefaultCRS:n,OtherSRS:n,OtherCRS:n}),t.title||(t.title=t.name),t.supportedSpatialReferences.push(...r),t}}})}function V(e){let t,r,n,a;for(const o of e.children)switch(o.localName){case\"LowerCorner\":[t,r]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)));break;case\"UpperCorner\":[n,a]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:r,xmax:n,ymax:a,spatialReference:m}}function W(e,t,r){return n(e,(e=>r?e.name===t&&e.namespaceUri===r:e.typeName===t||e.name===t))}async function X(e,t,r,n={}){const{featureType:a,extent:o}=await Y(e,t,r,n),{fields:s,geometryType:i,swapXY:p,objectIdField:u,geometryField:c}=await q(e,a.typeName,n);return{url:e.operations.GetCapabilities.url,name:a.name,namespaceUri:a.namespaceUri,fields:s,geometryField:c,geometryType:i,objectIdField:u,spatialReference:n.spatialReference??T.WGS84,extent:o,swapXY:p,wfsCapabilities:e,customParameters:n.customParameters}}async function Y(e,r,n,o={}){const{spatialReference:s=T.WGS84}=o,i=e.readFeatureTypes(),p=r?W(i,r,n):i.next().value;if(a(p))throw r?new t(P,`The type '${r}' could not be found in the service`):new t(N,\"The service is empty\");let u=new F({...p.extent,spatialReference:s});if(!y(s,m))try{await c(m,s,void 0,o),u=l(u,m)}catch{throw new t(v,\"Projection not supported\")}return{extent:u,spatialReference:s,featureType:p}}async function q(e,r,n={}){const[o,i]=await s([J(e.operations.DescribeFeatureType.url,r,n),_(e,r,n)]);if(o.error||i.error)throw new t(E,`An error occurred while getting info about the feature type '${r}'`,{error:o.error||i.error});const{fields:p,errors:u}=o.value??{},c=o.value?.geometryType||i.value?.geometryType,l=i.value?.swapXY??!1;if(a(c))throw new t(G,`The geometry type could not be determined for type '${r}`,{typeName:r,geometryType:c,fields:p,errors:u});return{...z(p??[]),geometryType:c,swapXY:l}}function z(e){const t=e.find((e=>\"geometry\"===e.type));let r=e.find((e=>\"oid\"===e.type));return e=e.filter((e=>\"geometry\"!==e.type)),r||(r=new h({name:C,type:\"oid\",alias:C}),e.unshift(r)),{geometryField:t?.name??null,objectIdField:r.name,fields:e}}async function _(t,r,n={}){let a,o=!1;const[s,i]=await Promise.all([K(t.operations.GetFeature.url,r,t.operations.GetFeature.outputFormat,{...n,count:1}),e(t.operations.GetFeature.url,{responseType:\"text\",query:Z(r,void 0,{...n,count:1}),signal:n?.signal})]),p=\"FeatureCollection\"===s.type&&s.features[0]?.geometry;if(p){let e;switch(a=f.fromJSON(d(p.type)),p.type){case\"Point\":e=p.coordinates;break;case\"LineString\":case\"MultiPoint\":e=p.coordinates[0];break;case\"MultiLineString\":case\"Polygon\":e=p.coordinates[0][0];break;case\"MultiPolygon\":e=p.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(i.data);if(t){const r=e[0].toFixed(3),n=e[1].toFixed(3),a=parseFloat(t[1]).toFixed(3);r===parseFloat(t[2]).toFixed(3)&&n===a&&(o=!0)}}return{geometryType:a,swapXY:o}}async function J(t,r,n){return Q(r,(await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"DescribeFeatureType\",VERSION:x,TYPENAME:r,...n?.customParameters},signal:n?.signal})).data)}function Q(e,r){const{name:a}=re(e),s=te(r);ae(s);const i=n(b(s.firstElementChild,{element:e=>({name:e.getAttribute(\"name\"),typeName:re(e.getAttribute(\"type\")).name})}),(({name:e})=>e===a));if(o(i)){const e=n(b(s.firstElementChild,{complexType:e=>e}),(e=>e.getAttribute(\"name\")===i.typeName));if(o(e))return B(e)}throw new t(P,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(s)})}const H=new Set([\"objectid\",\"fid\"]);function B(e){const r=[],n=[];let a;const o=b(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const s of o){const o=s.getAttribute(\"name\");if(!o)continue;let i,p;if(s.hasAttribute(\"type\")?i=re(s.getAttribute(\"type\")).name:w(s,{simpleType:{restriction:e=>(i=re(e.getAttribute(\"base\")).name,{maxLength:e=>{p=+e.getAttribute(\"value\")}})}}),!i)continue;const u=\"true\"===s.getAttribute(\"nillable\");let c=!1;switch(i.toLowerCase()){case\"integer\":case\"nonpositiveinteger\":case\"negativeinteger\":case\"long\":case\"int\":case\"short\":case\"byte\":case\"nonnegativeinteger\":case\"unsignedlong\":case\"unsignedint\":case\"unsignedshort\":case\"unsignedbyte\":case\"positiveinteger\":n.push(new h({name:o,alias:o,type:\"integer\",nullable:u}));break;case\"float\":case\"double\":case\"decimal\":n.push(new h({name:o,alias:o,type:\"double\",nullable:u}));break;case\"boolean\":case\"string\":case\"gyearmonth\":case\"gyear\":case\"gmonthday\":case\"gday\":case\"gmonth\":case\"anyuri\":case\"qname\":case\"notation\":case\"normalizedstring\":case\"token\":case\"language\":case\"idrefs\":case\"entities\":case\"nmtoken\":case\"nmtokens\":case\"name\":case\"ncname\":case\"id\":case\"idref\":case\"entity\":case\"duration\":case\"time\":n.push(new h({name:o,alias:o,type:\"string\",nullable:u,length:p??255}));break;case\"datetime\":case\"date\":n.push(new h({name:o,alias:o,type:\"date\",nullable:u,length:p??36}));break;case\"pointpropertytype\":a=\"point\",c=!0;break;case\"multipointpropertytype\":a=\"multipoint\",c=!0;break;case\"curvepropertytype\":case\"multicurvepropertytype\":case\"multilinestringpropertytype\":a=\"polyline\",c=!0;break;case\"surfacepropertytype\":case\"multisurfacepropertytype\":case\"multipolygonpropertytype\":a=\"polygon\",c=!0;break;case\"geometrypropertytype\":case\"multigeometrypropertytype\":c=!0,r.push(new t(G,`geometry type '${i}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:r.push(new t(k,`Unknown field type '${i}'`,{type:(new XMLSerializer).serializeToString(e)}))}c&&n.push(new h({name:o,alias:o,type:\"geometry\",nullable:u}))}for(const t of n)if(\"integer\"===t.type&&!t.nullable&&H.has(t.name.toLowerCase())){t.type=\"oid\";break}return{geometryType:a,fields:n,errors:r}}async function K(r,n,a,o){let{data:s}=await e(r,{responseType:\"text\",query:Z(n,a,o),signal:o?.signal});s=s.replace(/\": +(-?\\d+),(\\d+)(,)?/g,'\": $1.$2$3');try{if(o?.dateFields?.length){const e=new Set(o.dateFields);return JSON.parse(s,((t,r)=>e.has(t)?g(r):r))}return JSON.parse(s)}catch(i){throw new t(A,\"Error while parsing theresponse\",{response:s,error:i})}}function Z(e,t,r){return{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:e,OUTPUTFORMAT:t,SRSNAME:\"EPSG:4326\",STARTINDEX:r?.startIndex,COUNT:r?.count,...r?.customParameters}}async function ee(t,r,n){const a=te((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:r,RESULTTYPE:\"hits\",...n?.customParameters},signal:n?.signal})).data);ae(a);const o=Number.parseFloat(a.firstElementChild.getAttribute(\"numberMatched\"));return Number.isNaN(o)?0:o}function te(e){return(new DOMParser).parseFromString(e.trim(),\"text/xml\")}function re(e){const[t,r]=e.split(\":\");return{prefix:r?t:\"\",name:r??t}}function ne(e){const r=e.firstElementChild?.getAttribute(\"version\");if(r&&r!==x)throw new t(U,`Unsupported WFS version ${r}. Supported version: ${x}`)}function ae(e){let r=\"\",n=\"\";if(w(e.firstElementChild,{Exception:e=>(r=e.getAttribute(\"exceptionCode\"),{ExceptionText:e=>{n=e.textContent}})}),r)throw new t(`wfs-layer:${r}`,n)}export{C as WFS_OID_FIELD_NAME,J as describeFeatureType,W as findFeatureType,D as getCapabilities,K as getFeature,ee as getFeatureCount,Y as getFeatureTypeInfo,X as getWFSLayerInfo,Q as parseDescribeFeatureTypeResponse,I as parseGetCapabilitiesResponse,z as prepareWFSLayerFields};\n"],"sourceRoot":""}